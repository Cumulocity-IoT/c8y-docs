---
order: 90
title: Auditing
layout: default
---

The auditing interface consists of three parts:

-   The *audit API* resource returns URIs and URI templates to collections of audit records, so that they can be queried by criteria such as "all records from a particular user", or "all records from a particular application".
-   The *audit record collection* resource retrieves audit records and enables creating new audit records.
-   The *audit record* resource represents audit records that are individually queried.

# Audit API

## AuditRecords [application/vnd.com.nsn.cumulocity.auditApi+json]

<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Name
Type
Occurs
Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">self
URL
1
Link to this resource.</td>
<td align="left">auditRecords
AuditRecordCollection
1
Collection of all audit records.</td>
<td align="left">auditRecordsForType
AuditRecordCollection URI template
1
Read-only collection of all audit records of a particular type (placeholder &lt;&lt;type&gt;&gt;).</td>
<td align="left">auditRecordsForUser
AuditRecordCollection URI template
1
Read-only collection of all audit records for a particular user (placeholder &lt;&lt;user&gt;&gt;).</td>
</tr>
</tbody>
</table>

## GET the AuditAPI resource

Response body: application/vnd.com.nsn.cumulocity.auditApi+json
  
Required role: ROLE\_AUDIT\_READ

Example response:

    HTTP/1.1 200 OK
    Content-Type: application/vnd.com.nsn.cumulocity.auditApi+json;ver=...
    Content-Length: ...
     
    {
      "self" : "<<AuditAPI URL>>",
      "auditRecords" : { "self" :"<<AuditCollection URL>>" },
      "auditRecordsForType" : "<<AuditCollection URL>>?type={type}",
      "auditRecordsForUser" : "<<AuditCollection URL>>?user={user}",
      "auditRecordsForApplication" : "<<AuditCollection URL>>?application={application}",
      "auditRecordsForUserAndType" : "<<AuditCollection URL>>?user={user}&type={type}",
      "auditRecordsForUserAndApplication" : "<<AuditCollection URL>>?user={user}&application={application}",
      "auditRecordsForTypeAndApplication" : "<<AuditCollection URL>>?type={type}&application={application}",
      "auditRecordsForTypeAndUserAndApplication" : "<<AuditCollection URL>>?type={type}&user={user}&application={application}"
    }

# Audit record collection

## AuditRecordCollection [application/vnd.com.nsn.cumulocity.auditRecordCollection+json]

<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Name
Type
Occurs
Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">self
URI
1
Link to this resource.</td>
<td align="left">auditRecords
AuditRecord
0..n
List of audit records, see below.</td>
<td align="left">statistics
PagingStatistics
1
Information about paging statistics.</td>
<td align="left">prev
URI
0..1
Link to a potential previous page of audit records.</td>
</tr>
</tbody>
</table>

The "source" object of an audit record contains the properties "id" and "self".

## POST - create a new audit record

Request body: AuditRecord
 Response body: AuditRecordÂ (when Accept header is not provided, empty response body is returned)
  
Required role: ROLE\_AUDIT\_ADMIN

Example request:

    POST ...
    Host: ...
    Authorization: Basic ...
    Content-Length: ...
    Content-Type: application/vnd.com.nsn.cumulocity.auditRecord+json;ver=...
    {
      "type" : "com_cumulocity_audit_LoginFailure",
      "time" : "2011-09-06T12:03:27.845Z",
      "text" : "Login failed after 3 attempts.",
      "user" : "Spock",
      "application" : "Omniscape",
      "activity" : "login",
      "severity" : "warning"
    }

Example response:

    HTTP/1.1 201 Created
    Content-Type: application/vnd.com.nsn.cumulocity.auditRecord+json;ver=...
    Content-Length: ...
    Location: <<URL of new audit record>>
    {
      "id" : "123",
      "self" : "<<URL of new audit record>>",
      "creationTime" : "2011-09-06T12:03:27.927Z",
      "type" : "com_cumulocity_audit_LoginFailure",
      "time" : "2011-09-06T12:03:27.845Z",
      "text" : "Login failed after 3 attempts.",
      "user" : "Spock",
      "application" : "Omniscape",
      "activity" : "login",
      "severity" : "warning"
    }

The "id" and "creationTime" of the new audit record are generated by the server and returned in the response to the POST operation.

## GET audit records

Response body: AuditRecordCollection
  
Required role: ROLE\_AUDIT\_READ

Example response:

    HTTP/1.1 200 OK
    Content-Type: application/vnd.com.nsn.cumulocity.auditRecordCollection+json;ver=...
    Content-Length: ...
    {
      "self" : "",
      "auditRecords" : [
        {
          "id" : "123",
          "self" : "<<AuditRecord 123 URL>>",
          "creationTime" : "2011-09-06T12:03:27.927Z",
          "type" : "com_cumulocity_audit_LoginFailure",
          "time" : "2011-09-06T12:03:27.845Z",
          "text" : "Login failed after 3 attempts.",
          "user" : "Spock",
          "application" : "Omniscape",
          "activity" : "login",
          "severity" : "warning"
        }
      ],
      "statistics" : {
        "totalPages" : 3,
        "pageSize" : 5,
        "currentPage" : 1
      }
    }

# Audit record

## AuditRecord [application/vnd.com.nsn.cumulocity.auditRecord+json]

<table>
<colgroup>
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">Name
Type
Occurs
Description
PUT/POST</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">id
String
1
Uniquely identifies this audit record.
No</td>
<td align="left">self
URI
1
Link to this resource.
No</td>
<td align="left">creationTime
String
1
Time when audit record was created in the database.
No</td>
<td align="left">type
String
1
Identifies the type of this audit record.
POST: Mandatory<br />PUT:<br />No</td>
<td align="left">time
String
1
Time of the audit record.
POST: Mandatory<br />PUT:<br />No</td>
</tr>
</tbody>
</table>

## GET an audit record

Response body: AuditRecord
  
Required role: ROLE\_AUDIT\_READ

Example response:

    HTTP/1.1 200 OK
    Content-Type: application/vnd.com.nsn.cumulocity.auditRecord+json;ver=...
    Content-Length: ...
     
    {
      "id" : "123",
      "self" : "<<AuditRecord URL>>",
      "creationTime" : "2011-09-06T12:03:27.927Z",
      "type" : "com_cumulocity_audit_LoginFailure",
      "time" : "2011-09-06T12:03:27.845Z",
      "text" : "Login failed after 3 attempts.",
      "user" : "Spock",
      "application" : "Omniscape",
      "activity" : "login",
      "severity" : "warning"
    }
