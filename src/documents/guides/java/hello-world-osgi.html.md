---
order: 20
layout: default
title: Hello OSGi
---
## Overview

This section shows a minimal "Hello, world!" agent running in an OSGi container. The agent creates a dummy device in the inventory and terminates. Many more comprehensive examples can be found in our [Bitbucket repository](https://bitbucket.org/m2m/cumulocity-examples).

## Set up an agent project

Ensure that you are running the "Cumulocity runtime" platform (see the [setup instructions](/guides/java/installing-the-sdk)). Select "New", "Project", "Plug-in Project". Use, for example, "com.cumulocity.helloagent" as project name, check "an OSGi framework", click "Next" and "Finish". (Click "Yes" to change perspective if asked.)

The manifest editor opens up. Click on the "Dependencies" tab and use the rightmost "Add" button under "Imported Packages" to add the following dependencies.

-   com.cumulocity.rest.representation
-   com.cumulocity.rest.representation.inventory
-   com.cumulocity.sdk.client
-   com.cumulocity.sdk.client.inventory
-   com.cumulocity.model.authentication
-   org.slf4j

Save the manifest file.

## Write the agent code

Select the Activator class in src/com.cumulocity.helloagent/Activator.java. Type the following code into the "start" method, after any code auto-generated by Eclipse:

	Platform platform = new PlatformImpl("<<your URL>>", new CumulocityCredentials("<<user>>", "<<password>>"));
	InventoryApi inventory = platform.getInventoryApi();
	ManagedObjectRepresentation mo = new ManagedObjectRepresentation();
	mo.setName("Hello, world!");
	mo.set(new IsDevice());
	mo = inventory.create(mo);
	System.out.println("URL: " + mo.getSelf());

Replace the placeholders with your URL, username and password. Change the "Hello, world!" text into something less worn. Right-click in the editor and select "Source", "Organize Imports". What does this code do?

-   Line 1 connects the agent to the platform.
-   Line 2 retrieves a handle to the Cumulocity inventory.
-   Line 3 creates a new managed object.
-   Line 4 sets the display name of the new managed object.
-   Line 5 says that this managed object should be a device (should show up in device management).
-   Line 6 creates the managed object in the inventory. This will return the managed object back with an fresh, generated ID. (See "Object identity" section in ["Cumulocity's domain model"](/guides/concepts-guide/domain-model)).
-   Line 7 prints the URL to the new managed object that has just been stored in the inventory.

## Run the agent

Run your agent by right-clicking the "com.cumulocity.helloagent" project and select "Run as", "OSGi Framework". After a short while, you should see the URL of the created managed object on the console:

	URL: https://<<your URL>>/inventory/managedObjects/<<ID>>

**Got an error message?** Check the [troubleshooting section](/guides/developers-guide/troubleshooting-the-sdk).


# Improve the examples

Now that you have walked through a basic example, you can:

-   Proceed to ["Developing Java clients"](guides/developers-guide/developing-java-clients), ["Developing web clients"](guides/developers-guide/developing-web-clients) and the [reference guide](guides/reference-guide) to enhance the examples on your own.
-   Read the ["End-to-end example"](guides/developers-guide/an-end-to-end-example) for a more elaborate agent and application. This part shows also a few practical techniques, e.g., for injecting server addresses and passwords into your code.

