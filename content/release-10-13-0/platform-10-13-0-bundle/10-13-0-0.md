---
weight: 40
title: Release 10.13.0.0
layout: bundle
---

<!--10.11.1.0 - 10.11.137.0-->

### Improvements

<div><table ><colgroup>
<col style="width: 15%;"><col style="width: 70%;"><col style="width: 15%;"></colgroup>
<thead><tr>
<th>
Component</th>
<th>
Description</th>
<th>
Issue</th>
</tr>
</thead><tbody>

<tr>
<td>
Administration </td>
<td> In the <b>Own Applications</b> detail view the read-only fields are now properly disabled so that it is clear that they cannot be edited. </td>
<td>
MTM-26133</td>
</tr>

<tr>
<td>
Administration</td>
<td> In the SMS provider configuration certain tenant options can be inherited from the microservice owner tenant. Previously, this could not be determined from the UI. Now an additional hint (inherited from &#60;tenantID&#62;) will be displayed to denote that. </td>
<td>
MTM-38050</td>
</tr>

<tr>
<td>
<b>NEW:</b> Administration</td>
<td> The list items in Data broker &gt; Data connectors had a misaligned icon and title. This has been corrected by placing these elements in the same line. </td>
<td>
MTM-43067</td>
</tr>

<tr>
<td>
Authentication</td>
<td> When a user's password or privileges are changed, the tokens and sessions of the user will now be invalidated and the user will be logged out. This only applies to oAuth Internal.
<td>
MTM-41057</td>
</tr>

<tr>
<td>
Authentication</td>
<td> To improve the security posture of Cumulocity IoT, oAuth Internal has replaced Basic Auth as the default login mode for newly created tenants. The following defaults are applied:
<br>- Preconfigured authentication restrictions so that basic authentication cannot be used together with HTTP clients which are recognized by the Cumulocity IoT platform, for example web browsers
<br>- Preconfigured session management feature including default values of various timeouts associated with sessions
<br>- The maximum number of simultaneous user logins is limited
<br>- Reduced oAuth Internal token lifetime
<br>All applications dedicated to the Cumulocity IoT platform or integrated with the Cumulocity IoT platform (web application, microservices, etc.) should support authentication with oAuth Internal and be prepared for new sessions protection measures. The Cumulocity IoT platform terminates the session and logs out a user if in the scope of one session the Cumulocity IoT platform receives at least two HTTP requests with various values in the User-Agent HTTP header. All settings related to the default login mode, oAuth Internal configuration and session management configuration can be changed on platform level or on a tenant level.
<td>
MTM-41749</td>
</tr>

<tr>
<td>
Authentication</td>
<td> If oAuth Internal is configured to be used together with its authentication session management capacity, then all events relevant to a session lifecycle are logged. Events that are considered relevant are session creation, session deletion and the session's client ID modification. </td>
<td>
MTM-41053</td>
</tr>

<tr>
<td>
Authentication</td>
<td> If a user has a session limit set in the authentication configuration and tries to log in, and the active session limit exceeds the maximum, the oldest session will be invalidated with its tokens. </td>
<td>
MTM-41051</td>
</tr>

<tr>
<td>
Authentication</td>
<td> When oAuth Internal with session management is used for authentication then it is possible to perform additional validation of HTTP requests which belong to the same sessions (configurable behaviour). The Cumulocity IoT platform can check if all HTTP requests in the scope of a particular session have assigned the same value of the User-Agent HTTP header. If the Cumulocity IoT platform receives an HTTP request with the value of User-Agent HTTP header which does not match the value used in the previous request then the session is terminated and the user is logged out. </td>
<td>
MTM-41042</td>
</tr>

<tr>
<td>
Authentication </td>
<td> A new tooltip has been added to the authorization settings which explains that the <b>Enforce that all passwords are strong (green)</b> checkbox cannot be iterated because the property is enabled on system level. </td>
<td>
MTM-36662</td>
</tr>

<tr>
<td>
<b>NEW:</b> Authentication </td>
<td> Session token renewal now also works for microservices on <code>/service</code> endpoint when oAuth Internal with session authentication is enabled. Non-expired session tokens can be renewed only for the valid session. The renewal is performed when the renewal timeout is reached and a request with the session token is executed against the platform.  In the process of token renewal, the platform generates a new token that is set as a cookie. The old session token is valid 1 minute after the first renewal. If a token ready for renewal is sent more than once, then the platform returns the same generated token as during the first renewal. </td>
<td>
MTM-41044</td>
</tr>

<tr>
<td>
<b>NEW:</b> Authentication</td>
<td> Session token renewal now works only for oAuth Internal with enabled session authentication. Non-expired session tokens can be renewed only for the valid session. The renewal is performed when the renewal timeout is reached and a request with the session token is executed against the platform.  In the process of token renewal, the platform generates a new token that is set as a cookie. The old session token is valid 1 minute after the first renewal. If a token ready for renewal is sent more than once, then the platform returns the same generated token as during the first renewal. </td>
<td>
MTM-41043</td>
</tr>


<tr>
<td>
Billing</td>
<td> Two additional fields have been introduced to the device statistics:
<br>- deviceType - value of the <code>type</code> field from the corresponding device
<br>- deviceParents - list of unique identifiers of parents for the corresponding device </td>
<td>
MTM-41317</td>
</tr>

<tr>
<td>
Core platform </td>
<td> A task has been created which solves inconsistencies with the count of active alarms stored in managed objects. The task is executed every Sunday. Technically, the managed object fragment "c8y_ActiveAlarmsStatus" will be recalculated with values based on the alarm collection.
 </td>
<td>
MTM-39515</td>
</tr>

<tr>
<td>
<b>NEW:</b>Core platform </td>
<td> A new parameter <core>withChildrenCount</core> has been introduced for the endpoint <core>inventory/managedObjects</core> and <core>/inventory/managedObjects/{id}</core> which returns the number of managed objects in lists: childAdditions, childAssets, childDevices.
<br>It works as follows:
<br>- if not provided - number of documents is not returned (property is omitted)
<br>- for withChildrenCount=true - number of documents is returned
<br>- for withChildrenCount=false - number of documents is not returned (property is omitted)
<br>The parameter <br>withChildrenCount</br> can be used together with the parameter <br>withChildren</br> and for parameters <br>withChildrenCount=true&amp;withChildren=false</br> the endpoint will return the number of documents in assets without a list of documents. </td>
<td>
MTM-40340</td>
</tr>

<tr>
<td>
Emailing</td>
<td> To improve security, access to the /email/emails endpoint on port 8111 has been restricted to internal traffic. </td>
<td>
MTM-41531</td>
</tr>

<tr>
<td>
<b>NEW:</b>Inventory roles </td>
<td> The performance of inventory roles has been improved. GET requests for alarms, events, and measurements work much faster now for users with inventory-role access when querying with the parameter "source", but without the parameters "withSourceDevices" or "withSourceAssets".
<br> In the UI, this change speeds up the following screens:
<br>- Device Management - alarms and events for a single device
<br>- Device Management/Cockpit - alarms and events dashboards on particular group views
<br>This feature must be enabled on platform level or on tenant level via tenant-option. The tenant option has 2 possible values: LEGACY / OPTIMIZED, where LEGACY currently is the global default. The option looks like the following in the REST API:
<br> <code>{ "category": "configuration", "key": "acl.algorithm-version", "value": "OPTIMIZED"} </code> </td>
<td>
MTM-41033, MTM-41061</td>
</tr>


<tr>
<td>
Messaging Service</td>
<td> It is now possible to configure a HTTP/HTTPS proxy for the data broker agent microservice, in the usual manner for microservices. See <a href="https://cumulocity.com/guides/microservice-sdk/concept/#proxy-variables" class="no-ajaxy">General aspects > Microservice manifest</a> in the <i>Microservice SDK guide</i>. </td>
<td>
MTM-41307</td>
</tr>

<tr>
<td>
Microservice</td>
<td> The "cep" microservice has been removed from the list of default microservices for new installations.</td>
<td>
MTM-39794</td>
</tr>

<tr>
<td>
Microservice </td>
<td> As a microservice provider you can define higher values than 256 MB memory and 250Mi CPU as resources request in the microservice manifest. </td>
<td>
MTM-40361</td>
</tr>

<tr>
<td>
<b>NEW:</b>MongoDB</td>
<td> The tenants loading time has been improved by properly utilizing indexes.</td>
<td>
MTM-41049</td>
</tr>

<tr>
<td>
REST API</td>
<td> The REST API has been updated to provide the ability to query alarms and events by filtering using <code>lastUpdatedFrom=&lt;iso-date-time&gt;</code> and <code>lastUpdatedTo=&lt;iso-date-time&gt;</code> parameters. </td>
<td>
MTM-41364</td>
</tr>

<tr>
<td>
REST API</td>
<td> The legacy Dozer library has been removed from Cumulocity IoT core and CEP Esper, improving security by removing redundant code. </td>
<td>
MTM-38301</td>
</tr>

<tr>
<td>
<b>NEW:</b> REST API</td>
<td> The REST API has been updated to provide the ability to query alarms by filtering using <code>createdFrom=&lt;iso-date-time&gt;</code> and <code>createdTo=&lt;iso-date-time&gt;</code> parameters. </td>
<td>
MTM-42499</td>
</tr>

<tr>
<td>
Security </td>
<td> As a protective measure for CVE-2021-44228 on start-up of a microservice Cumulocity IoT Core adds a specific property to the microservice environment variables in order to suppress log4-jndi lookups. Refer to the <i>Microservice SDK guide</i> for details.
<td>
MTM-42875</td>
</tr>

</tbody></table></div>



### Fixes

<div><table ><colgroup>
<col style="width: 15%;"><col style="width: 70%;"><col style="width: 15%;"></colgroup>
<thead><tr>
<th>
Component</th>
<th>
Description</th>
<th>
Issue</th>
</tr>
</thead><tbody>

<td>
Administration</td>
<td> Microservice logs can be viewed with realtime on or off. If realtime is on, the next and the last page buttons are now disabled.</td>
<td>
MTM-39675</td>
</tr>

<tr>
<td>
Administration</td>
<td> The <b>New tenant</b> form had some overlapping style issues on the <b>Storage limit per device</b> field resulting in unreadable error messages. These issues have been fixed.</td>
<td>
MTM-41498</td>
</tr>

<tr>
<td>
Administration</td>
<td> The number of request UI application executes has been decreased in order to get statistics data displayed on the usage statistics page to 1 request.</td>
<td>
MTM-41087</td>
</tr>

<tr>
<td>
Administration</td>
<td> It is now possible to collapse folders on the <b>Inventory roles</b> tab of users.</td>
<td>
MTM-41004</td>
</tr>

<tr>
<td>
Administration</td>
<td> Password strength validation works consistently now during subtenant creation.</td>
<td>
MTM-41565</td>
</tr>

<tr>
<td>
Administration</td>
<td> An issue has been fixed where translations were missing on the inventory roles assignment view.</td>
<td>
MTM-41374</td>
</tr>

<tr>
<td>
Administration</td>
<td> Previously it was possible to save an invalid default value when editing or creating new properties which would lead to invalid forms being saved. Therefore, maxlength, minlength and pattern validation has been added when assigning a default value for properties in the <b>Properties library</b> page. Additionally, invalid forms in the <b>Custom properties</b> page now instantly trigger validation feedback.</td>
<td>
MTM-42002</td>
</tr>

<tr>
<td>
Administration</td>
<td> The inventory roles selection dropdown list now only shows the roles available to the owner instead of all roles defined in the tenant.</td>
<td>
MTM-41617</td>
</tr>

<tr>
<td>
Administration</td>
<td> The cell ID usage statistics icon showed an outdated layout. This has been fixed by a reference to the current Delite icon library.</td>
<td>
MTM-42306</td>
</tr>

<tr>
<td>
Administration</td>
<td> On creating a user, it is now again possible to set a new owner in the user details.</td>
<td>
MTM-42578</td>
</tr>

<tr>
<td>
<b>NEW:</b> Administration</td>
<td> The subtenants view now uses the new data grid component for displaying, filtering and sorting tenants. This change fixes the issue that loading of more items had been broken on larger screens.</td>
<td>
MTM-38873</td>
</tr>

<tr>
<td>
Connectivity</td>
<td> In the Administration application, the <b>Connectivity</b> menu entry had been displayed in the navigator even when there were no connectivity providers to be displayed resulting in navigating to an empty page. The <b>Connectivity</b> entry is now only displayed if there are accessible connectivity providers.</td>
<td>
MTM-41798</td>
</tr>


<tr>
<td>
Email templates</td>
<td> When the tenant administrator creates a new user, the user receives a confirmation email along with a password reset option. Previously, the default password reset email template did not contain the username. The template has been changed so that for new users the username is included in the email.</td>
<td>
MTM-40430</td>
</tr>

<tr>
<td>
Enterprise tenant</td>
<td> The documentation about the delegation of authority in user hierarchies has been improved. See <a href="https://cumulocity.com/guides/users-guide/enterprise-tenant/#user-hierarchies" class="no-ajaxy">Enterprise tenant > Managing user hierarchies</a> in the <i>User guide</i>.</td>
<td>
MTM-40337</td>
</tr>

<tr>
<td>
Enterprise tenant</td>
<td> The REST client which is used for requests for managing SSL certificates has been optimized by increasing the connection pool size, introducing read, connect and connection keep alive timeout limits and enabling expired and idle connection evict mechanisms.</td>
<td>
MTM-41182</td>
</tr>

<tr>
<td>
Enterprise tenant</td>
<td> On the <b>Branding</b> page the following fields are now mandatory: <b>Main brand logo</b>, <b>Favicon</b>, <b>Main brand color</b>.</td>
<td>
MTM-42893</td>
</tr>

<tr>
<td>
Export</td>
<td> The date picker dropdown is now expanded correctly on the export creation screen when selecting a custom date range for a report.</td>
<td>
MTM-41479</td>
</tr>

<tr>
<td>
Export</td>
<td> The export title has been missing in the filename of export files. This has been resolved.</td>
<td>
MTM-41901</td>
</tr>

<tr>
<td>
Karaf/OSGI</td>
<td> The vulnerable netty-codec library has been updated from version 4.1.66 to version 4.1.70.</td>
<td>
MTM-42147</td>
</tr>

<tr>
<td>
Karaf/OSGI</td>
<td> The Log4j library has been updated to version 2.16 to mitigate CVE-2021-44228.</td>
<td>
MTM-42885</td>
</tr>

<tr>
<td>
Kubernetes</td>
<td> The microservice manifest provides settings to manage microservice instances and the application deployment in the Cumulocity IoT platform. Microservice providers are now enabled to configure requests for memory higher than 256M and for CPU higher than 250m. Note that based on system settings it might be the case that a higher or lower value is used when creating the microservice subscription. Refer to <a href="https://cumulocity.com/guides/microservice-sdk/concept/#manifest" class="no-ajaxy">General asepcts > Microservice manifest</a> in the <i>Microservice SDK guide</i> for details about resource requests and limits.</td>
<td>
MTM-38924</td>
</tr>

<tr>
<td>
Realtime</td>
<td> Fixed an issue where a real-time connection loss looked like a data loss. Now, when the real-time connection is recovered, the graph will be reloaded and re-rendered to avoid the impression of data loss.</td>
<td>
MTM-41680</td>
</tr>

<tr>
<td>
Report agent</td>
<td> Removing the export configuration now properly removes its configured schedulers. As a result, the report agent doesn't attempt to create an export for non-existing configurations, which previously resulted in an error in logs.</td>
<td>
MTM-40358</td>
</tr>

<tr>
<td>
REST API</td>
<td> When green password is enforced and the minimal strong password length (<code>system.password.green.min-length</code> property) is higher than the device password length (<code>device-user.password.length</code> property), the system will use the green.min-length value, i.e. generate a longer password. Prior to this change, the system rejected auto-generated passwords that were too short blocking device bootstrap.</td>
<td>
MTM-39836</td>
</tr>

<tr>
<td>
REST API</td>
<td> The race condition which can occur during the processing of the following requests has been corrected:
<br>GET, POST, PUT /user/{tenantId}/users/{username}/roles/inventory
<br>GET, PUT, DELETE /user/{tenantId}/users/{username}/roles/inventory/{id}
<br>GET /user/{tenantId}/users/{username}/roles/inventory/{id}/roles
<br>In rare cases the race condition could have caused errors during the processing of the above requests.</td>
<td>
MTM-41855</td>
</tr>

<tr>
<td>
<b>NEW:</b> REST API</td>
<td> Previously, when there were issues related to SMTP, and any action triggered the platform sending an email, the request was blocked until timeout. Now the SMTP server is not blocked by emails which can't be delivered, such emails are rejected instead.</td>
<td>
MTM-40429</td>
</tr>

<tr>
<td>
Security</td>
<td> To improve security, the 3rd party software moment.js and jQuery have been upgraded to their latest versions.</td>
<td>
MTM-39227</td>
</tr>


<tr>
<td>
SMS microservice</td>
<td> Removed default names related to Cumulocity IoT or Software AG in the SMS provider configuration.</td>
<td>
MTM-41014</td>
</tr>

<tr>
<td>
SMS microservice</td>
<td> It is now possible to override default spring-boot error message attributes by defining a <i>microservice_error_attributes.properties</i> file.
<br>Sample content:
<br>server.error.include-message=ALWAYS
<br>server.error.include-binding-errors=ALWAYS</td>
<td>
MTM-42000</td>
</tr>

<tr>
<td>
UI</td>
<td>  Only text-based log files (with mime type <code>text\*</code>) can be previewed in the UI, for other mime types a warning will be displayed.</td>
<td>
MTM-38672</td>
</tr>

</tbody></table></div>
