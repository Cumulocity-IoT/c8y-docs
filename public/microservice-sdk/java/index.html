<!DOCTYPE html>
<html>
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <base href="" />
    <meta name="generator" content="Hugo 0.54.0 with theme C8yDocs">
    <title>Microservice SDK for Java - Cumulocity IoT Guides</title>
    <meta name="author" content="Carlos Ceia @ Cumulocity">
    <meta name="keywords" content=", Software AG Cloud, Cumulocity IoT, Internet of things, analytics, devices, connect">


    <link rel="icon" href="/favicon.ico">

    

    

    
    
    
    <link rel="stylesheet" href="https://cumulocity.com/guides/style.css">
    

      
      <script> window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","cumulocity.zendesk.com"); </script>
        <script type="text/JavaScript">
          window.zESettings = {
            webWidget: {
              color: {
                theme: '#1776bf'    
              },
              position: {
                horizontal: 'right',
                vertical: 'top'     
              }
            }
          };
          </script>
        
        
   
  </head><body data-spy="scroll" data-target="#main-nav" ><button type="button" class="sidebar-toggle">
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span>MENU</span>
</button>
<nav class="main-top-bar" >
  <div class="d-flex container">
    <ul class="nav d-flex flex-start hidden-xs nav-left">
      <li><a href="https://www.softwareag.cloud/site/product/cumulocity-iot.html">Cumulocity IoT</a></li>
      <li><a href="http://resources.cumulocity.com/documentation/jssdk/latest/#/api">Cumulocity Angular API</a></li>
    </ul>
    <ul class="nav flex-end nav-right">
      <li>   <script>
              (function() {
                var cx = '008969372384807682938:yeh7xt785g4';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
        <div id="___gcse_0" dir="ltr"><form class="gsc-search-box gsc-search-box-tools" accept-charset="utf-8"><div class="table-responsive"><table cellspacing="0" cellpadding="0" class="gsc-search-box"><tbody><tr><td class="gsc-input"><div class="gsc-input-box" id="gsc-iw-id1"><table cellspacing="0" cellpadding="0" id="gs_id50" class="gstl_50 gsc-input" style="width: 100%; padding: 0px;"><tbody><tr><td id="gs_tti50" class="gsib_a"><input autocomplete="off" type="text" size="10" class="gsc-input" name="search" title="search" id="gsc-i-id1" placeholder="Custom Search" dir="ltr" spellcheck="false" x-webkit-grammar="builtin:search" lang="en" style="width: 100%; padding: 0px; border: none; margin: -0.0625em 0px 0px; height: 1.25em; background: url(&quot;https://www.google.com/cse/static/images/1x/googlelogo_lightgrey_46x16dp.png&quot;) left center no-repeat rgb(255, 255, 255); text-indent: 48px; outline: none;"></td><td class="gsib_b"><div class="gsst_b" id="gs_st50" dir="ltr"><a class="gsst_a" href="javascript:void(0)" style="display: none;" title="Clear search box" role="button"><span class="gscb_a" id="gs_cb50" aria-hidden="true">Ã—</span></a></div></td></tr></tbody></table></div></td><td class="gsc-search-button"><button class="gsc-search-button gsc-search-button-v2"><svg width="13" height="13" viewBox="0 0 13 13"><title>search</title><path d="m4.8495 7.8226c0.82666 0 1.5262-0.29146 2.0985-0.87438 0.57232-0.58292 0.86378-1.2877 0.87438-2.1144 0.010599-0.82666-0.28086-1.5262-0.87438-2.0985-0.59352-0.57232-1.293-0.86378-2.0985-0.87438-0.8055-0.010599-1.5103 0.28086-2.1144 0.87438-0.60414 0.59352-0.8956 1.293-0.87438 2.0985 0.021197 0.8055 0.31266 1.5103 0.87438 2.1144 0.56172 0.60414 1.2665 0.8956 2.1144 0.87438zm4.4695 0.2115 3.681 3.6819-1.259 1.284-3.6817-3.7 0.0019784-0.69479-0.090043-0.098846c-0.87973 0.76087-1.92 1.1413-3.1207 1.1413-1.3553 0-2.5025-0.46363-3.4417-1.3909s-1.4088-2.0686-1.4088-3.4239c0-1.3553 0.4696-2.4966 1.4088-3.4239 0.9392-0.92727 2.0864-1.3969 3.4417-1.4088 1.3553-0.011889 2.4906 0.45771 3.406 1.4088 0.9154 0.95107 1.379 2.0924 1.3909 3.4239 0 1.2126-0.38043 2.2588-1.1413 3.1385l0.098834 0.090049z"></path></svg></button></td><td class="gsc-clear-button"><div class="gsc-clear-button" title="clear results">&nbsp;</div></td></tr></tbody></table></div></form></div>
      </li>
    </ul>
  </div>
</nav><button type="button" class="to-the-top">
  <span class="sr-only">Top</span>
  <span class="fa fa-chevron-up"></span>
</button><nav class="main-nav navbar">
  <header class="nav-header">
    <a href="https://www.softwareag.cloud/site/dev-center/cumulocity-iot.html">
      <img src="https://cumulocity.com/guides/images/cumulocity-iot.svg"
        class="img-responsive no-zoom"
        alt="Cumulocity IoT">
    </a>

    <div class="dropdown">
      <button class="dropdown-toggle"
        type="button"
        id="dropdownMenuButton"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false">
        <span id="current-dropdown-toggle" class="text-truncate"></span> <span class="caret"></span>
      </button>
      <div class="dropdown-menu"
        aria-labelledby="dropdownMenuButton">
        
        
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/release-notes/overview/'><i class="c8y-icon c8y-icon-notification"></i> Release notes</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/concepts/introduction/'><i class="c8y-icon c8y-icon-c8y-data"></i> Concepts guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/users-guide/getting-started/'><i class="c8y-icon c8y-icon-user"></i> User guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/benutzerhandbuch/overview/'><i class="c8y-icon c8y-icon-user"></i> Handbuch</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/devices/overview/'><i class="c8y-icon c8y-icon-device-management"></i> Device guides</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/edge/overview/'><i class="fa fa-book"></i> Cumulocity IoT Edge</a>
        
        
        
        
        
        
        
        

        
        
        
        
        <span class="current-app">Microservice SDK guide</span>
        
        

        <a class='dropdown-menu-item active'
          href='https://cumulocity.com/guides/microservice-sdk/introduction/'><i class="c8y-icon c8y-icon-tools"></i> Microservice SDK guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/device-sdk/introduction/'><i class="c8y-icon c8y-icon-tools"></i> Device SDK guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/web/introduction/'><i class="c8y-icon c8y-icon-smart-rest"></i> Web SDK guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/apama/overview-analytics/'><i class="c8y-icon c8y-icon-data-explorer"></i> Analytics guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/reference/rest-implementation/'><i class="fa fa-book"></i> Reference guide</a>
        
      </div>
    </div>
  </header>

  

  <nav id="main-nav"
    class="nav-sections">
    
    
    <div class="">
        
        
        
        
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/introduction/">Microservices SDK</a>
     
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav1"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/concept/">General aspects</a>
     
      
      
      <div id="page-nav1"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#overview">Overview</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#docker">Docker image and container</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#manifest">Microservice manifest</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#isolation-levels">Microservice isolation levels</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#scaling">Scaling</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#security">Security</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#environment-variables">Environment variables</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#packaging">Packaging</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#request-routing">Request routing</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#requirements">Microservice requirements</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#operation">Operating microservices</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#deployment">Deploying microservices</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class=" slot-active ">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav2"
        class="collapse-btn ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=" active "
        href="https://cumulocity.com/guides/microservice-sdk/java/">Microservice SDK for Java</a>
     
      
      
      <div id="page-nav2"
        class="collapse   show  ">
        <nav class="list-group nav">
          
          
          <a class="list-group-item"
            href="#introduction">Overview</a>
          
            
          
          <a class="list-group-item"
            href="#java-microservice">Hello microservice!</a>
          
            
          
          <a class="list-group-item"
            href="#developing-microservice">Developing Microservices</a>
          
            
          
          <a class="list-group-item"
            href="#developing-services-client">Developing Java clients for services</a>
          
            
          
          <a class="list-group-item"
            href="#troubleshooting">Troubleshooting</a>
          
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav3"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/cs/">Microservice SDK for C#</a>
     
      
      
      <div id="page-nav3"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/cs/#introduction">Overview</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/cs/#hello-world-basic">Hello, world!</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/cs/#developing-microservice">Developing Microservices</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav4"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/rest/">Using the REST interface</a>
     
      
      
      <div id="page-nav4"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#overview">Overview</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#microservice-development">Microservice development</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#application-development">Application development</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#smartrest">Using SmartREST</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav5"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/http/">Python example</a>
     
      
      
      <div id="page-nav5"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/http/#hello-microservice-python">Hello Microservice Python</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    
  </nav>
</nav>
<div class="cover"></div>

<div class="main-content">
  <article class="page-section">
    <header class="section-header">
      <h1 class="text-light">Microservice SDK for Java</h1>
    </header>
    
      <div class="lead">
        
      </div>
      
  </article>

  
  
  
  <article id="introduction" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#introduction">
        <span class="fa fa-link"></span>
      </button>
      Overview</h2>
    

<p>This section describes how to develop and deploy microservices on top of Cumulocity using the Microservice SDK for Java.</p>

<p>To get started, check the <a href="/guides/microservice-sdk/java#java-microservice">Hello World example</a>.</p>

<blockquote>
<p><strong>Info</strong>: You can develop Cumulocity with any IDE and any build tool that you prefer, but the examples focus on Maven and Eclipse.</p>
</blockquote>

<p>After reviewing the &ldquo;Hello world&rdquo; you may continue with the section <a href="/guides/microservice-sdk/java#developing-services-client">Developing Java clients</a>.</p>

<p>Finally, here are some references for getting started with the basic technologies underlying the SDK:</p>

<ul>
<li>The client libraries use the Cumulocity REST interfaces as underlying communication protocol as described in the section on <a href="/guides/microservice-sdk/rest">REST</a>.</li>
<li>All examples and libraries are open source, check <a href="https://bitbucket.org/m2m">https://bitbucket.org/m2m</a>.</li>
</ul>

<p>JavaDoc for the
<a href="http://resources.cumulocity.com/documentation/microservicesdk/current/" target="_blank">Java Microservice SDK</a> can be found on our resources site.</p>

<h3 id="general-prerequisites">General prerequisites</h3>

<p>To use the Java SE client libraries, you need to have at least Version 6 of the <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java Development Kit</a> for your operating system. Some of the examples require Java 7. Java 8 is not supported and some features may not work correctly with Java 8.
To verify the version of your Java Development Kit, type</p>

<pre><code>$ javac -version
</code></pre>

<p>The output needs to show a version number later than &ldquo;1.6.0_24&rdquo; for the basic examples.</p>

  </article>
  
  <article id="java-microservice" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#java-microservice">
        <span class="fa fa-link"></span>
      </button>
      Hello microservice!</h2>
    

<p>This section shows you how to create a microservice that can be run on cumulocity.com, using Cumulocity Microservice SDK.</p>

<h3 id="prerequisites">Prerequisites</h3>

<p>Create an account on cumulocity.com, for example by using a free trial. At this step you will be provided with a dedicated URL address.</p>

<p>Verify, that you have Maven 3 installed with Java (7+):</p>

<pre><code>$ mvn -v
Apache Maven 3.1.1 (0728685237757ffbf44136acec0402957f723d9a; 2013-09-17 17:22:22+0200)
Maven home: /usr/local/Cellar/maven/3.1.1/libexec
Java version: 1.7.0_45, vendor: Oracle Corporation
Java home: /Library/Java/JavaVirtualMachines/jdk1.7.0_45.jdk/Contents/Home/jre
Default locale: en_US, platform encoding: UTF-8
OS name: &quot;mac os x&quot;, version: &quot;10.9.4&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;
</code></pre>

<blockquote>
<p><strong>Info:</strong> Maven can be downloaded from <a href="http://maven.apache.org">http://maven.apache.org</a>.</p>
</blockquote>

<p>Verify the docker installation:</p>

<p>Cumulocity hosts linux/amd64 docker containers and not Windows containers. The docker version must be &gt;= 1.12.6</p>

<pre><code>$ docker version
Client:
 Version:         1.12.6
 API version:     1.24
 OS/Arch:         linux/amd64

Server:
 Version:         1.12.6
 API version:     1.24
 OS/Arch:         linux/amd64
</code></pre>

<h3 id="developing-the-hello-world-agent">Developing the &ldquo;Hello, world!&rdquo; agent</h3>

<p>To develop a very simple &ldquo;Hello, world!&rdquo; agent for Cumulocity, you need to</p>

<ul>
<li>create a Maven project,</li>
<li>add a dependency to the Cumulocity Microservice SDK library to the Maven pom.xml,</li>
<li>create a Java application,</li>
<li>configure the microservice,</li>
<li>configure the build,</li>
<li>build and run the Java application.</li>
</ul>

<h4 id="creating-a-maven-project">Creating a Maven project</h4>

<p>To create a plain Java project with Maven, run</p>

<pre><code>$ mvn archetype:generate -DgroupId=c8y.example -DartifactId=hello-world-microservice -DarchetypeArtifactId=maven-archetype-quickstart -DinteractiveMode=false
</code></pre>

<p>This will create a folder &ldquo;hello-world-microservice&rdquo; in the current directory with a skeleton structure for your project.</p>

<h4 id="adding-the-java-microservice-library">Adding the Java Microservice library</h4>

<p>Edit the &ldquo;pom.xml&rdquo; in the &ldquo;hello-world-microservice&rdquo; folder. Add a <code>repositories</code> and a <code>pluginRepositories</code> element to point to the Cumulocity Maven repository, which stores the client libraries.</p>

<pre><code>&lt;repositories&gt;
    &lt;repository&gt;
        &lt;id&gt;cumulocity&lt;/id&gt;
        &lt;layout&gt;default&lt;/layout&gt;
        &lt;url&gt;http://download.cumulocity.com/maven/repository&lt;/url&gt;
    &lt;/repository&gt;
&lt;/repositories&gt;
&lt;pluginRepositories&gt;
    &lt;pluginRepository&gt;
        &lt;id&gt;public&lt;/id&gt;
        &lt;url&gt;http://download.cumulocity.com/maven/repository&lt;/url&gt;
    &lt;/pluginRepository&gt;
&lt;/pluginRepositories&gt;
</code></pre>

<p>Add <code>dependency</code> elements for the Java Microservice SDK library (<code>microservice-autoconfigure</code>) to the <code>dependencies</code> section.</p>

<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.nsn.cumulocity.clients-java&lt;/groupId&gt;
    &lt;artifactId&gt;microservice-autoconfigure&lt;/artifactId&gt;
    &lt;version&gt;${c8y.version}&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>Edit the <code>version</code> elements to use the latest version of the client library. The version can be determined by checking the <a href="https://cumulocity.zendesk.com/hc/en-us/sections/200381323-Announcements">Announcements section</a> of the Cumulocity Help Center. The full file after editing can be found <a href="/guides/microservice-sdk/java#developing-microservice">here</a>.</p>

<h4 id="creating-a-java-application">Creating a Java application</h4>

<p>Edit the &ldquo;App.java&rdquo; file in the folder &ldquo;hello-world-microservice/src/main/java/c8y/example&rdquo; with the following content:</p>

<pre><code>package c8y.example;

import com.cumulocity.microservice.autoconfigure.MicroserviceApplication;
import org.springframework.boot.SpringApplication;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

@MicroserviceApplication
@RestController
public class App{
  public static void main(String[] args) {
      SpringApplication.run(App.class, args);
  }

  @RequestMapping(&quot;hello&quot;)
  public String greeting(@RequestParam(value = &quot;who&quot;, defaultValue = &quot;world&quot;) String who) {
      return &quot;hello &quot; + who + &quot;!&quot;;
  }
}
</code></pre>

<p>@MicroserviceApplication - is a simple way to add required behavior for Cumulocity Microservice, including:</p>

<ul>
<li>security</li>
<li>subscription</li>
<li>health indicator</li>
<li>context</li>
<li>internal platform API</li>
<li>spring boot application</li>
</ul>

<p>@RequestMapping - opens an endpoint for greeting.</p>

<h4 id="configuring-the-microservice">Configuring the microservice</h4>

<p>Add an &ldquo;application.properties&rdquo; file to the &ldquo;src/main/resources&rdquo; directory with the following properties:</p>

<pre><code>application.name=hello-world
server.port=80
</code></pre>

<p>Add a &ldquo;cumulocity.json&rdquo; file to the &ldquo;src/main/configuration&rdquo; directory with the following content:</p>

<pre><code>{
&quot;apiVersion&quot;:&quot;1&quot;,
&quot;version&quot;:&quot;@project.version@&quot;,
&quot;provider&quot;: {
  &quot;name&quot;:&quot;Cumulocity GmbH&quot;
  },
  &quot;isolation&quot;:&quot;MULTI_TENANT&quot;,
  &quot;requiredRoles&quot;: [
  ],
  &quot;roles&quot;:[
  ]
}
</code></pre>

<p>This file is required to deploy the microservice in the Cumulocity infrastructure.</p>

<h4 id="configuring-the-build">Configuring the build</h4>

<p>To create a deployable ZIP file, you need to add the following to your .pom file:</p>

<pre><code>&lt;properties&gt;
    &lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;
    &lt;spring-boot-dependencies.version&gt;1.5.7.RELEASE&lt;/spring-boot-dependencies.version&gt;
    &lt;c8y.version&gt;9.8.0&lt;/c8y.version&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.nsn.cumulocity.clients-java&lt;/groupId&gt;
        &lt;artifactId&gt;microservice-autoconfigure&lt;/artifactId&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;

&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;!-- microservice api --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.nsn.cumulocity.clients-java&lt;/groupId&gt;
            &lt;artifactId&gt;microservice-dependencies&lt;/artifactId&gt;
            &lt;version&gt;${c8y.version}&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
            &lt;scope&gt;import&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;

&lt;build&gt;
    &lt;plugins&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;${spring-boot-dependencies.version}&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;repackage&lt;/goal&gt;
                    &lt;/goals&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
        &lt;plugin&gt;
            &lt;groupId&gt;com.nsn.cumulocity.clients-java&lt;/groupId&gt;
            &lt;artifactId&gt;microservice-package-maven-plugin&lt;/artifactId&gt;
            &lt;version&gt;${c8y.version}&lt;/version&gt;
            &lt;executions&gt;
                &lt;execution&gt;
                    &lt;id&gt;package&lt;/id&gt;
                    &lt;phase&gt;package&lt;/phase&gt;
                    &lt;goals&gt;
                        &lt;goal&gt;package&lt;/goal&gt;
                    &lt;/goals&gt;
                    &lt;configuration&gt;
                        &lt;name&gt;hello-world&lt;/name&gt;
                        &lt;image&gt;hello-world&lt;/image&gt;
                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;
                    &lt;/configuration&gt;
                &lt;/execution&gt;
            &lt;/executions&gt;
        &lt;/plugin&gt;
    &lt;/plugins&gt;
&lt;/build&gt;    
</code></pre>

<h3 id="building-the-microservice">Building the microservice</h3>

<p>To build the ZIP file, use the following command:</p>

<pre><code>$mvn clean install
</code></pre>

<p>After a successful build you will be provided with a ZIP file in the target directory. The ZIP can be deployed to the platform as described in the Deployment section.</p>

<h3 id="a-name-run-locally-a-running-microservice-locally"><a name="run-locally"></a> Running microservice locally</h3>

<p>In order to test the microservice for the calls from the microservice to Cumulocity, you can run the docker container locally.</p>

<p>To verify calls from Cumulocity to the microservice, the microservice must be deployed.</p>

<p>To run a microservice which uses Cumulocity API locally you need the following:</p>

<ul>
<li>URL address of the Cumulocity host of your tenant</li>
<li>Authorization header = &ldquo;Basic {Base64({username}:{password})}&rdquo;</li>
<li>Tenant - tenant ID</li>
</ul>

<p><strong>Step 1 - Create application</strong></p>

<p>If the application does not exist, create a new application on a platform:</p>

<pre><code>POST {URL}/application/applications
</code></pre>

<p>HEADERS:</p>

<pre><code>&quot;Authorization&quot;: &quot;{AUTHORIZATION}&quot;
&quot;Content-Type&quot;: &quot;application/vnd.com.nsn.cumulocity.application+json&quot;
&quot;Accept: application/vnd.com.nsn.cumulocity.application+json&quot;
</code></pre>

<p>BODY:</p>

<pre><code>{
        &quot;name&quot;: &quot;{APPLICATION_NAME}&quot;,
        &quot;type&quot;: &quot;MICROSERVICE&quot;,
        &quot;key&quot;: &quot;{APPLICATION_NAME}-microservice-key&quot;
}
</code></pre>

<p>Example:</p>

<pre><code>$curl -X POST -s \
  -d &quot;{&quot;name&quot;:&quot;hello-microservice-1&quot;,&quot;type&quot;:&quot;MICROSERVICE&quot;,&quot;key&quot;:&quot;hello-microservice-1-key&quot;}&quot; \
  -H &quot;Authorization: {AUTHORIZATION}&quot; \
  -H &quot;Content-Type: application/vnd.com.nsn.cumulocity.application+json&quot; \
  -H &quot;Accept: application/vnd.com.nsn.cumulocity.application+json&quot; \
  &quot;{URL}/application/applications&quot;
</code></pre>

<p>Example response:</p>

<pre><code>{
    &quot;availability&quot;: &quot;PRIVATE&quot;,
    &quot;id&quot;: &quot;{APPLICATION_ID}&quot;,
    &quot;key&quot;: &quot;{APPLICATION_NAME}-microservice-key&quot;,
    &quot;manifest&quot;: {
        &quot;imports&quot;: [],
        &quot;noAppSwitcher&quot;: true
    },
    &quot;name&quot;: &quot;{APPLICATION_NAME}&quot;,
    &quot;owner&quot;: {
        &quot;self&quot;: &quot;...&quot;,
        &quot;tenant&quot;: {
            &quot;id&quot;: &quot;...&quot;
        }
    },
    &quot;requiredRoles&quot;: [],
    &quot;roles&quot;: [],
    &quot;self&quot;: &quot;..&quot;,
    &quot;type&quot;: &quot;MICROSERVICE&quot;
}      
</code></pre>

<p>If the application has been created correctly, you can get the application ID from the response.</p>

<p><strong>Step 2 - Acquire microservice bootstrap user</strong></p>

<pre><code>GET {URL}/application/applications/{APPLICATION_ID}/bootstrapUser
</code></pre>

<p>HEADERS:</p>

<pre><code>&quot;Authorization&quot;: {AUTHORIZATION}
&quot;Content-Type&quot;: application/vnd.com.nsn.cumulocity.user+json
</code></pre>

<p>Example response:</p>

<pre><code>HTTP/1.1 200 Ok
Content-Type: application/vnd.com.nsn.cumulocity.user+json
{
  &quot;tenant&quot;: &quot;...&quot;,
  &quot;name&quot;: &quot;...&quot;,
  &quot;password&quot;: &quot;...&quot;
}
</code></pre>

<p><strong>Step 3 - Run microservice locally</strong></p>

<p>The image is already added to the local docker repository during the build. List all the docker repository images available:</p>

<pre><code>$ docker images
</code></pre>

<p>After you find the image in the list, run the docker container for the microservice by providing the baseurl and the bootstrap user credentials:</p>

<pre><code>$ docker run -e C8Y_BASEURL={URL} -e C8Y_BOOTSTRAP_TENANT={BOOTSTRAP_TENANT} -e C8Y_BOOTSTRAP_USER={BOOTSTRAP_USERNAME} -e C8Y_BOOTSTRAP_PASSWORD={BOOTSTRAP_USER_PASSWORD} -e C8Y_MICROSERVICE_ISOLATION=MULTI_TENANT -i -t {DOCKER_REPOSITORY_IMAGE}:{TAG}
</code></pre>

<p><strong>Step 4 - Subscribe to microservice</strong></p>

<pre><code>POST {URL}/tenant/tenants/{TENANT_ID}/applications
</code></pre>

<p>HEADERS:</p>

<pre><code>&quot;Authorization&quot;: &quot;{AUTHORIZATION}&quot;
</code></pre>

<p>BODY:</p>

<pre><code>{&quot;application&quot;:{&quot;id&quot;: &quot;{APPLICATION_ID}&quot;}}
</code></pre>

<p>Example:</p>

<pre><code>curl -X POST -d &quot;{&quot;application&quot;:{&quot;id&quot;: &quot;{APPLICATION_ID}&quot;}}&quot;  \
-H &quot;Authorization: {AUTHORIZATION}&quot; \
-H &quot;Content-type: application/json&quot; \
 &quot;{URL}/tenant/tenants/{TENANT_ID}/applications&quot;
</code></pre>

<h4 id="deployment">Deployment</h4>

<p>To deploy a microservice application on an environment you need the following:</p>

<ul>
<li>URL address of the Cumulocity host of your tenant</li>
<li>Authorization header = &ldquo;Basic {Base64({username}:{password})}&rdquo;</li>
<li>Tenant - tenant ID</li>
<li>ZIP build from previous step for deployment</li>
</ul>

<p><strong>Step 1 - Create application</strong></p>

<p>If the application does not exist, create a new application on a platform.
For details, refer to the &ldquo;Create application&rdquo; step in <a href="#run-locally">Run microservice locally</a>.</p>

<p><strong>Step 2 - Upload ZIP file</strong></p>

<pre><code>POST {URL}/application/applications/{APPLICATION_ID}/binaries
</code></pre>

<p>HEADERS:</p>

<pre><code>&quot;Authorization&quot;: &quot;{AUTHORIZATION}&quot;
&quot;Content-Type&quot;: &quot;multipart/form-data&quot;
</code></pre>

<p>Example:</p>

<pre><code>  curl -F &quot;data=@{PATH_TO_ZIP}&quot; \
  -H &quot;Authorization: {AUTHORIZATION}&quot; \
  &quot;{URL}/application/applications/{APPLICATION_ID}/binaries&quot;
</code></pre>

<p><strong>Step 3 - Subscribe to microservice</strong></p>

<p>For details, refer to the &ldquo;Subscribe to microservice&rdquo; step in <a href="#run-locally">Run microservice locally</a>.</p>

<p><strong>Step 4 - Verify if microservice is running</strong></p>

<p>Now you can verify if your application is running by executing</p>

<pre><code>curl -H &quot;Authorization: {AUTHORIZATION}&quot; \
  {URL}/service/hello-world/hello?who=me
</code></pre>

<p>The expected result is:</p>

<pre><code>hello me!
</code></pre>

<h3 id="improving-the-microservice">Improving the microservice</h3>

<p>Now that you have done your first step, check out the section <a href="/guides/microservice-sdk/java#developing-microservice">Developing Java Microservice</a>.</p>

  </article>
  
  <article id="developing-microservice" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#developing-microservice">
        <span class="fa fa-link"></span>
      </button>
      Developing Microservices</h2>
    

<p>This document describes microservice SDK features, including annotations, services, configuration files, logging and maven build plugin.</p>

<h3 id="overview">Overview</h3>

<p>There are two possible deployment types on the platform:</p>

<ul>
<li>Hosted deployment - the default for microservices. For typical use cases the hosted deployment is the suggested one.</li>
<li>External/legacy deployment - requires custom installation of the platform and agent.</li>
</ul>

<p>For development and testing purposes one can deploy a microservice on a local docker. <!--The process is described in this document. Info is missing!--></p>

<h3 id="annotations">Annotations</h3>

<p>The simplest way to add required behavior to your application is to annotate a main class with @MicroserviceApplication.</p>

<p>This is a collective annotation consisting of:</p>

<ul>
<li>@SpringBootApplication - comes from spring boot auto configure package</li>
<li>@EnableContextSupport - is required to use @UserScope, or @TenantScope scopes for method invocations</li>
<li>@EnableHealthIndicator - provides standard health endpoint used by the platform to monitor microservice availability<br /></li>
<li>@EnableMicroserviceSecurity - provides standard security mechanism, verifying user and roles against the platform</li>
<li>@EnableMicroserviceSubscription - is responsible for subscribing microservices to the platform, updating metadata and listen to tenant subscription change events</li>
<li>@EnableMicroservicePlatformInternalApi - injects the platform API services into spring context for a microservice to use</li>
</ul>

<h3 id="context-support">Context support</h3>

<p>The following section describes context support as utility tool for the user management described in <a href="/guides/microservice-sdk/concept">General aspects of microservices in Cumulocity</a>.</p>

<p>@UserScope and @TenantScope at type level annotation indicate that a bean created from class will be created in the scope defined. The user scope implies using tenant platform user credentials for platform calls. The tenant scope implies using service user credentials.</p>

<p>Example of injecting a bean into the tenant scope is available in the platform API module as follows:</p>

<pre><code>@TenantScope
public EventApi eventApi(Platform platform) throws SDKException {
    return platform.getEventApi();
}  
</code></pre>

<p>And then sample utilization of the bean can be as follows:</p>

<pre><code>@Autowired
private PlatformProperties platformProperties;
@Autowired
private ContextService&lt;MicroserviceCredentials&gt; contextService;
@Autowired
private EventApi eventApi;

public PagedEventCollectionRepresentation get10Events() {
    return contextService.callWithinContext(
            (MicroserviceCredentials) platformProperties.getMicroserviceBoostrapUser()
            , new Callable&lt;PagedEventCollectionRepresentation&gt;(){
        public PagedEventCollectionRepresentation call(){
            return eventApi.getEvents().get(10);
        }
    });
}
</code></pre>

<h3 id="microservice-security">Microservice security</h3>

<p>The @EnableMicroserviceSecurity annotation sets up the standard security configuration for microservices, which requires basic authorization for all endpoints (except for health check endpoint configured using @EnableHealthIndicator). A developer can secure its endpoints using standard spring security annotations e.g. @PreAuthorize(&ldquo;hasRole(&lsquo;ROLE_A&rsquo;)&ldquo;) and user&rsquo;s permissions will be validated  against user&rsquo;s roles stored on the platform.</p>

<h3 id="microservice-subscription">Microservice subscription</h3>

<p>The microservice subscription module is responsible for two main features:</p>

<ul>
<li>registration</li>
<li>tenant subscription event listening</li>
</ul>

<p>The default behavior for the package is self-registration, which means that after you run the application it will try to register and use generated credentials for the communication with the platform. The self-registration is required to correctly deploy the microservice on the platform.</p>

<p>The other way to register an application to the platform is to do it manually by creating a new application on the platform with the same application name and providing the following properties into the microservice:</p>

<pre><code>application.name={application_name}
C8Y.bootstrap.register=false
C8Y.bootstrap.tenant={tenant}
C8Y.bootstrap.user={user}
C8Y.bootstrap.password={password}
</code></pre>

<p>To create an application and acquire credentials, refer to:</p>

<ul>
<li><a href="/guides/microservice-sdk/rest#creating-application">Create application</a></li>
<li><a href="/guides/microservice-sdk/rest#acquiring-microservice-credentials">Acquire microservice credentials</a></li>
</ul>

<p>The subscription package provides means to monitor and act upon changes in tenant subscriptions to a microservice. To add a custom behavior a developer can add an event listener for MicroserviceSubscriptionAddedEvent and MicroserviceSubscriptionRemovedEvent like in the following example:</p>

<pre><code>@EventListener
public void onAdded(MicroserviceSubscriptionAddedEvent event{
    log.info(&quot;subscription added for tenant: &quot; + event.getCredentials().getTenant());
}
</code></pre>

<p>On application startup the MicroserviceSubscriptionAddedEvent is triggered for all subscribed tenants.</p>

<h3 id="platform-api">Platform API</h3>

<p>The package consists of a number of services that are build and injected into spring context. A developer can use them to perform basic operations against the platform. The beans are built based on properties read from a file. For hosted deployment, most of the properties are provided by the platform.</p>

<p>The API provides the following services:</p>

<ul>
<li>Alarm - AlarmApi</li>
<li>AuditRecord - AuditRecordApi</li>
<li>CepModule - CepApi</li>
<li>Operation - DeviceControlApi</li>
<li>Event - EventApi</li>
<li>ExternalID - IdentityApi</li>
<li>Binary - BinariesApi</li>
<li>ManagedObject - InventoryApi</li>
<li>Measurement - MeasurementApi</li>
</ul>

<p>The API provides basic CRUD methods, see alarm interface example below:</p>

<pre><code>AlarmRepresentation create(final AlarmRepresentation alarm)
Future createAsync(final AlarmRepresentation alarm)

AlarmRepresentation getAlarm(final GId gid)
AlarmCollection getAlarms()
AlarmCollection getAlarmsByFilter(final AlarmFilter filter)

AlarmRepresentation update(final AlarmRepresentation alarm)
</code></pre>

<p>Sample usage:</p>

<pre><code>@Autowired
private AlarmApi alarms;

public AlarmRepresentation addHelloAlarm(){
      AlarmRepresentation alarm = new AlarmRepresentation();
      alarm.setSeverity(&quot;CRITICAL&quot;);
      alarm.setStatus(&quot;Hello&quot;);
      return alarms.create(alarm);
}
</code></pre>

<h3 id="configuration-files">Configuration files</h3>

<p>The property file used by the hosted deployment must be located in src/main/resources/application.xml.</p>

<p>For external/legacy deployment, the following paths will be searched in order to find a property file specific for the environment the application is run on:
* {UPPERCASE(application_name)}_CONF_DIR/.{application_name}
* {UPPERCASE(application_name)}_CONF_DIR/{application_name}
* {user/home}/.{application_name}
* {user/home}/{application_name}
* {CONF_DIR}/.{application_name}
* {CONF_DIR}/{application_name}
* /etc/{application_name}</p>

<p>Properties used by a microservice are:</p>

<pre><code>application.name - Application name
C8Y.bootstrap.register - Indicates whether microservice should follow self-registration process. True by default
C8Y.baseURL - Address of the platform. Provided by the deployment process
C8Y.baseURL.mqtt - Address of the MQTT service. Provided by the platform
C8Y.bootstrap.tenant - Microservice owner tenant
C8Y.bootstrap.user - User used by microservice, or by microservice registration process
C8Y.bootstrap.password - Password used by microservice, or by microservice registration process
C8Y.bootstrap.delay - Subscription refresh delay
C8Y.bootstrap.initialDelay - Initial subscription delay
C8Y.microservice.isolation - Microservice isolation. Only PER_TENANT or MULTI_TENANT values are available. MULTI_TENANT by default
</code></pre>

<h3 id="logging">Logging</h3>

<p>For hosted deployment the standard output should be used.</p>

<p>For external/legacy deployment logging into the application implies using spring logging described in <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html">this article</a>.</p>

<p>The following locations are searched for log-back file:</p>

<ul>
<li>{UPPERCASE(application_name)}_CONF_DIR/.{application_name}/logging.xml</li>
<li>{UPPERCASE(application_name)}_CONF_DIR/{application_name}/logging.xml</li>
<li>{user/home}/.{application_name}/logging.xml</li>
<li>{user/home}/{application_name}/logging.xml</li>
<li>{CONF_DIR}/.{application_name}/logging.xml</li>
<li>{CONF_DIR}/{application_name}/logging.xml</li>
<li>/etc/{application_name}/logging.xml</li>
</ul>

<h3 id="maven-plugin">Maven plugin</h3>

<p>The package module provides a maven plugin to prepare a ZIP file required by the microservice deployment, with simple configuration. The build requires an executable jar. To create one, a developer can use spring-boot-maven-plugin.</p>

<p>An example with minimum configuration is presented below:</p>

<pre><code>&lt;plugin&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;repackage&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;configuration&gt;
        &lt;mainClass&gt;${main.class}&lt;/mainClass&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;com.nsn.cumulocity.clients-java&lt;/groupId&gt;
    &lt;artifactId&gt;microservice-package-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;9.0.0&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;package&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;package&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;name&gt;hello-world&lt;/name&gt;
              &lt;encoding&gt;UTF-8&lt;/encoding&gt;
              &lt;rpmSkip&gt;true&lt;/rpmSkip&gt;
              &lt;containerSkip&gt;false&lt;/containerSkip&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
            &lt;id&gt;microservice-package&lt;/id&gt;
            &lt;phase&gt;package&lt;/phase&gt;
            &lt;goals&gt;
              &lt;goal&gt;microservice-package&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
              &lt;name&gt;hello-world&lt;/name&gt;
              &lt;image&gt;hello-world&lt;/image&gt;
              &lt;encoding&gt;UTF-8&lt;/encoding&gt;
              &lt;skip&gt;false&lt;/skip&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>

<h4 id="package-goal">Package goal</h4>

<p>The package plugin is responsible for creation of a docker container, rpm file and for creating a ZIP file, that can be deployed on the platform.
It can be configured with the following parameters:</p>

<ul>
<li>name (alias package.name) - defaults to project.artifactId</li>
<li>description (alias package.description) - defaults to project.description</li>
<li>jvmArgs (alias agent-package.jvmArgs) - jvm-gc arguments. The default value is <code>-XX:+UseConcMarkSweepGC -XX:+CMSParallelRemarkEnabled -XX:+ScavengeBeforeFullGC -XX:+CMSScavengeBeforeRemark</code>&rdquo;. Will be overwritten if   other options are provided.</li>
<li>arguments (alias agent-package.arguments) - arguments passed on Java application startup</li>
<li>encoding (alias project.build.sourceEncoding)  - defaults to UTF-8</li>
<li>heap (alias agent-package.heap) - defaults to min = 128MB max = 384MB</li>
<li>perm (alias agent-package.perm) - defaults to min = 64MB max = 128MB</li>
<li>skip (alias skip.agent.package) - to skip the whole packaging part</li>
<li>rpmSkip (alias skip.agent.package.rpm) - to skip rpm file creation. False by default</li>
<li>containerSkip (alias skip.agent.package.container) - to skip docker image creation. True by default</li>
<li>manifestFile - points to a manifest file location. Default value: ${basedir}/src/main/configuration/cumulocity.json</li>
</ul>

<p>Example configuration:</p>

<pre><code>&lt;configuration&gt;
  &lt;name&gt;hello-world&lt;/name&gt;
  &lt;encoding&gt;UTF-8&lt;/encoding&gt;
  &lt;rpmSkip&gt;true&lt;/rpmSkip&gt;
  &lt;containerSkip&gt;false&lt;/containerSkip&gt;
  &lt;manifestFile&gt;${basedir}/src/main/microservice/cumulocity.json&lt;/manifestFile&gt;
&lt;/configuration&gt;
</code></pre>

<h4 id="push-goal">Push goal</h4>

<p>The push plugin is responsible for pushing the docker image to a registry. The registry can be configured by:</p>

<ul>
<li>containerSkip  (alias skip.agent.package.container) - prevents the push to execute.  True by default</li>
<li>registry (alias agent-package.container.registry) - docker registry address</li>
</ul>

<p>Example configuration:</p>

<pre><code>    &lt;configuration&gt;
      &lt;registry&gt;http://{yourregistry.com}&lt;/registry&gt;
      &lt;containerSkip&gt;false&lt;/containerSkip&gt;
    &lt;/configuration&gt;
</code></pre>

<h4 id="upload-goal">Upload goal</h4>

<p>Microservice upload goal is responsible for deploying the microservice to a server.</p>

<p>We have three options to configure server url and credentials:</p>

<ul>
<li>settings.xml - maven global configuration placed at ~/.m2/settings.xml</li>
<li>pom.xml - maven project configuration file</li>
<li>command line</li>
</ul>

<p>All three ways can be used together, i.e. goal partially can be configured in settings.xml and partially in pom.xml.
In case of conflicts the command line configuration has the highest priority and settings xml configuration the lowest.</p>

<p>To upload a microservice to the server you need to configure the following properties:</p>

<ul>
<li>url - Mandatory URL that will be used for deployment. Empty by default.</li>
<li>username - Mandatory tenant name and user name used for authorization. Empty by default.</li>
<li>password - Mandatory password used for authorization. Empty by default.</li>
<li>name - Optional name of uploaded application. By default the same as &ldquo;package.name&rdquo; property or &ldquo;artifactId&rdquo; if &ldquo;package.name&rdquo; is not provided.</li>
</ul>

<h4 id="settings-xml">settings.xml</h4>

<p>To configure the goal in the settings.xml file we need to add the server configuration as follows:</p>

<pre><code>&lt;server&gt;
    &lt;id&gt;microservice&lt;/id&gt;
    &lt;username&gt;demos/username&lt;/username&gt;
    &lt;password&gt;******&lt;/password&gt;
    &lt;configuration&gt;
        &lt;url&gt;https://demos.cumulocity.com&lt;/url&gt;
    &lt;/configuration&gt;
&lt;/server&gt;
</code></pre>

<h4 id="pom-xml">pom.xml</h4>

<p>To configure the plugin in the pom.xml file we need to add the server configuration as follows.</p>

<pre><code>&lt;plugin&gt;
    &lt;groupId&gt;com.nsn.cumulocity.clients-java&lt;/groupId&gt;
    &lt;artifactId&gt;microservice-package-maven-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;application&gt;
            &lt;name&gt;cep&lt;/name&gt;
        &lt;/application&gt;

        &lt;!-- please note that the credentials are optional if they are already configured in settings.xml --&gt;
        &lt;credentials&gt;
            &lt;url&gt;https://demos.cumulocity.com&lt;/url&gt;
            &lt;username&gt;demos/username&lt;/username&gt;
            &lt;password&gt;******&lt;/password&gt;
        &lt;/credentials&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>

<h5 id="command-line">Command line</h5>

<p>To pass the configuration only to the particular build, run</p>

<pre><code>mvn microservice:upload -Dupload.application.name=cep -Dupload.url=https://demos.cumulocity.com -Dupload.username=demos/username -Dupload.password=******
</code></pre>

<h3 id="deployment">Deployment</h3>

<h4 id="hosted-deployment">Hosted deployment</h4>

<blockquote>
<p><strong>Info</strong>: For your convenience we have prepared a utility deployment script available <a href="/guides/reference/microservice-package">here</a>.</p>
</blockquote>

<p>To deploy an application on an environment you need the following:</p>

<ul>
<li>URL address of your tenant</li>
<li>Authorization header = &ldquo;Basic {Base64({username}:{password})}&rdquo;</li>
<li>Tenant - tenant ID</li>
<li>ZIP build from previous step</li>
</ul>

<p><strong>Step 1 - Create application</strong></p>

<p>If the application does not exist, create a new application on the platform:</p>

<pre><code>POST /application/applications
Host: ...
Authorization: Basic xxxxxxxxxxxxxxxxxxx
Content-Type: &quot;application/json&quot;
</code></pre>

<p>BODY:</p>

<pre><code>{
        &quot;name&quot;: &quot;{APPLICATION_NAME}&quot;,
        &quot;type&quot;: &quot;MICROSERVICE&quot;,
        &quot;key&quot;: &quot;{APPLICATION_NAME}-microservice-key&quot;
}
</code></pre>

<p>Example:</p>

<pre><code>$curl -X POST -s \
  -d &quot;{&quot;name&quot;:&quot;hello-microservice-1&quot;,&quot;type&quot;:&quot;MICROSERVICE&quot;,&quot;key&quot;:&quot;hello-microservice-1-key&quot;}&quot; \
  -H &quot;Authorization: {AUTHORIZATION}&quot; \
  -H &quot;Content-type: application/json&quot; \
  &quot;{URL}/application/applications&quot;
</code></pre>

<p>If the application has been created correctly, you can get the application ID by invoking:</p>

<pre><code>GET /application/applicationsByName/{APPLICATION_NAME}
Host: ...
Authorization: Basic xxxxxxxxxxxxxxxxxxx
Accept: &quot;application/json&quot;
</code></pre>

<p>Example:</p>

<pre><code>curl -H &quot;Authorization:{AUTHORIZATION}&quot; \
 {URL}/application/applicationsByName/hello-world
</code></pre>

<p><strong>Step 2 - Upload zip file</strong></p>

<pre><code>POST /application/applications/{APPLICATION_ID}/binaries
Host: ...
Authorization: Basic xxxxxxxxxxxxxxxxxxx
Content-Type: &quot;multipart/form-data&quot;
</code></pre>

<p>Example:</p>

<pre><code>  curl -F &quot;data=@{PATH_TO_ZIP}&quot; \
  -H &quot;Authorization: {AUTHORIZATION}&quot; \
  &quot;{URL}/application/applications/{APPLICATION_ID}/binaries&quot;
</code></pre>

<p><strong>Step 3 - Subscribe to microservice</strong></p>

<pre><code>POST /tenant/tenants/$TENANT/applications
Host: ...
Authorization: Basic xxxxxxxxxxxxxxxxxxx
Content-Type: &quot;multipart/form-data&quot;
</code></pre>

<p>BODY:</p>

<pre><code>{&quot;application&quot;:{&quot;id&quot;: &quot;{APPLICATION_ID}&quot;}}
</code></pre>

<p>Example:</p>

<pre><code>curl -X POST -d &quot;{&quot;application&quot;:{&quot;id&quot;: &quot;{APPLICATION_ID}&quot;}}&quot;  \
-H &quot;Authorization: {AUTHORIZATION}&quot; \
-H &quot;Content-type: application/json&quot; \
 &quot;{URL}/tenant/tenants/{TENANT}/applications&quot;
</code></pre>

<h4 id="local-docker-deployment">Local docker deployment</h4>

<p>To deploy the application on a local docker, one needs to inject the environment variables into a container. This is done via the docker run -e parameter. The full description of available parameters is available in <a href="/guides/reference/microservice-runtime">Microservice runtime &gt; Environment variables</a> in the Reference guide.</p>

<p>An example execution could be:</p>

<pre><code>docker run -e &quot;C8Y_BASEURL={C8Y_BASEURL}&quot; -e &quot;C8Y_BASEURL_MQTT={C8Y_BASEURL_MQTT}&quot; {IMAGE_NAME}
</code></pre>

<h3 id="monitoring">Monitoring</h3>

<p>To check if a hosted microservice is running successfully, the microservice&rsquo;s health endpoint can be checked.
This endpoint is enabled by default for all microservices that are developed using Java Microservice SDK.</p>

<pre><code>GET {URL}/service/{APPLICATION_NAME}/health
</code></pre>

<p>Example response:</p>

<pre><code>HTTP/1.1 200 
{
  &quot;status&quot;:&quot;UP&quot;
}
</code></pre>

<p>or</p>

<pre><code>HTTP/1.1 503
{
  &quot;status&quot;:&quot;DOWN&quot;
}
</code></pre>

  </article>
  
  <article id="developing-services-client" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#developing-services-client">
        <span class="fa fa-link"></span>
      </button>
      Developing Java clients for services</h2>
    

<p>This section describes the Cumulocity Email and SMS API and shows how to access them using the Cumulocity Java Client.</p>

<h3 id="using-the-services-platform">Using the services platform</h3>

<p>The &ldquo;services platform interface&rdquo; is responsible for connecting to the Services (SMS) API from Java.</p>

<pre><code>ServicesPlatform platform = new ServicesPlatformImpl(&quot;&lt;&lt;URL&gt;&gt;&quot;, new CumulocityCredentials(&quot;&lt;&lt;tenant&gt;&gt;&quot;, &quot;&lt;&lt;user&gt;&gt;&quot;, &quot;&lt;&lt;password&gt;&gt;&quot;, &quot;&lt;application key&gt;&quot;));
</code></pre>

<p>The URL pointing to the platform must be of the form <code>{tenant}.cumulocity.com</code>, for example <code>https://demos.cumulocity.com</code>, which will process all the API requests.</p>

<p><strong>Info</strong>: You need to have appropriate credentials to be able to access the Services API from outside, see example above.</p>

<h3 id="accessing-the-sms-messaging-api">Accessing the SMS Messaging API</h3>

<p>In the following section you will learn how to send and receive SMS messages via the Java Client API.</p>

<p>The following code snippet shows how to obtain a handle to the SMS API from Java:</p>

<pre><code>SmsMessagingApi smsMessagingApi = platform.getSmsMessagingApi();
</code></pre>

<p>Using this handle, you can send and retrieve the SMS messages from Java by calling its functions.</p>

<h4 id="prerequisites">Prerequisites</h4>

<h5 id="assigning-required-roles">Assigning required roles</h5>

<p>To use the SMS messaging API the user should have the required roles such as &lsquo;SMS_ADMIN&rsquo; for sending and &lsquo;SMS_READ&rsquo; for receiving messages.</p>

<p>Refer to <a href="/guides/users-guide/administration#managing-permissions">Administration &gt; Managing permissions</a> in the User guide.</p>

<h5 id="choosing-a-sms-provider">Choosing a SMS provider</h5>

<p><strong>OpenIT</strong></p>

<p>OpenIT credentials can be assigned using the Administration application. Click <strong>OpenIT credentials</strong> in the navigator and save these credentials for your tenant.</p>

<p><img src="/guides/images/java/java-client-services/openit_credentials.png" alt="OpenIT Credentials" /></p>

<p>Note that receiving messages and receiving specific messages are not supported for this provider.</p>

<p><strong>Jasper Control Center</strong></p>

<p>Refer to <a href="/guides/users-guide/optional-services#jasper">Jasper Control Center</a> for information about how to set the credentials.</p>

<p><strong>Ericsson</strong></p>

<p>For Ericsson, use our Rest API to store tenant options separately for each key:</p>

<pre><code>POST /tenant/options
Host: ...
Authorization: Basic ...
</code></pre>

<p>Provider:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;provider&quot;,
    &quot;value&quot;: &quot;ericsson-dcp&quot;
  }
</code></pre>

<p>Base URL:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;ericsson-dcp.baseUrl&quot;,
    &quot;value&quot;: &quot;&lt;url&gt;&quot;
  }
</code></pre>

<p>Username:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;ericsson-dcp.username&quot;,
    &quot;value&quot;: &quot;&lt;username&gt;&quot;
  }
</code></pre>

<p>Password:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;ericsson-dcp.password&quot;,
    &quot;value&quot;: &quot;&lt;password&gt;&quot;
  }
</code></pre>

<p>Sender address:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;sms.senderAddress&quot;,
    &quot;value&quot;: &quot;&lt;The phone number all SMS will be sent from (provided by Ericsson DCP)&gt;&quot;
  }
</code></pre>

<p>Sender name:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;sms.senderName&quot;,
    &quot;value&quot;: &quot;&lt;The name associated with the phone number&gt;&quot;
  }
</code></pre>

<p>Note that receiving specific messages is not supported for this provider.</p>

<p><strong>Telia Sonera</strong></p>

<p>For Telia Sonera, use our Rest API to store tenant options separately for each key:</p>

<pre><code>POST /tenant/options
Host: ...
Authorization: Basic ...
</code></pre>

<p>Provider:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;provider&quot;,
    &quot;value&quot;: &quot;soneraoma&quot;
  }
</code></pre>

<p>Username of Telia Sonera Client Application:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;soneraoma.username&quot;,
    &quot;value&quot;: &quot;&lt;username&gt;&quot;
  }
</code></pre>

<p>Password assigned for Telia Sonera Client Application:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;soneraoma.password&quot;,
    &quot;value&quot;: &quot;&lt;password&gt;&quot;
  }
</code></pre>

<p>Telia Sonera OAUTH Service Endpoint:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;soneraoma.authUrl&quot;,
    &quot;value&quot;: &quot;&lt;OAUTH Service endpoint url as appears in TS Application Profile, e. g., https://api.sonera.fi/autho4api/v1&gt;&quot;
  }
</code></pre>

<p>Telia Sonera Messaging OMA v1 Endpoint:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;soneraoma.messagingUrl&quot;,
    &quot;value&quot;: &quot;&lt;Messaging endpoint url as appears in TS Application Profile, e. g., https://api.sonera.fi/sandbox/messaging/v1&gt;&quot;
  }
</code></pre>

<p>Note that receiving messages and receiving specific messages is not supported for this provider.</p>

<p><strong>Tropo</strong></p>

<p>For Tropo, use our Rest API to store tenant options separately for each key</p>

<pre><code>POST /tenant/options
Host: ...
Authorization: Basic ...
</code></pre>

<p>Provider:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;provider&quot;,
    &quot;value&quot;: &quot;tropo&quot;
  }
</code></pre>

<p>Base URL:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;tropo.baseUrl&quot;,
    &quot;value&quot;: &quot;&lt;url&gt;&quot;
  }
</code></pre>

<p>Credentials:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;tropo.credentials&quot;,
    &quot;value&quot;: &quot;&lt;credentials&gt;&quot;
  }
</code></pre>

<p>Sender address:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;sms.senderAddress&quot;,
    &quot;value&quot;: &quot;cumulocity&quot;
  }
</code></pre>

<p>Sender name:</p>

<pre><code>  {
    &quot;category&quot;: &quot;messaging&quot;,
    &quot;key&quot;: &quot;sms.senderName&quot;,
    &quot;value&quot;: &quot;cumulocity&quot;
  }
</code></pre>

<p>Note that receiving messages and receiving specific message is not supported for this provider.</p>

<h4 id="sending-a-message">Sending a message</h4>

<p>To send a SMS message using the API, prepare the message with the &ldquo;send message request builder&rdquo; and call the &ldquo;send message&rdquo; function of the API with the message.</p>

<pre><code>SendMessageRequest smsMessage = SendMessageRequest.builder()
        .withSender(Address.phoneNumber(&quot;&lt;phone number&gt;&quot;))
        .withReceiver(Address.phoneNumber(&quot;&lt;phone number&gt;&quot;))
        .withMessage(&quot;&lt;message text&gt;&quot;)
        .build();

smsMessagingApi.sendMessage(smsMessage);
</code></pre>

<h4 id="receiving-all-messages">Receiving all messages</h4>

<p>Not every SMS provider supports receiving messages.</p>

<p>To receive all SMS messages you can use the API as follows:</p>

<pre><code>smsMessagingApi.getAllMessages(Address.phoneNumber(&quot;&lt;phone number&gt;&quot;));
</code></pre>

<h4 id="receiving-a-specific-message">Receiving a specific message</h4>

<p>Not every SMS provider supports receiving messages.</p>

<p>To receive a specific SMS message you can use the API as follows:</p>

<pre><code>smsMessagingApi.getMessage(Address.phoneNumber(&quot;&lt;phone number&gt;&quot;), &quot;&lt;message id&gt;&quot;);
</code></pre>

<h4 id="sms-management-endpoints">SMS management endpoints</h4>

<p>To accomplish the same behaviour, Rest API can be used.</p>

<p>Sending message:</p>

<pre><code>POST /service/messaging/smsmessaging/outbound/tel:&lt;sender phone number&gt;/requests
Host: ...
Authorization: Basic ...
Content-Type: application/json
{
    &quot;outboundSMSMessageRequest&quot;: {
    &quot;address&quot;: [&quot;tel:&lt;phone number&gt;&quot;],
    &quot;senderAddress&quot;: &quot;tel:&lt;phone number&gt;&quot;,
    &quot;outboundSMSTextMessage&quot;: {
        &quot;message&quot;: &quot;&lt;message text&gt;&quot;
    },
    &quot;receiptRequest&quot;: {
        &quot;notifyUrl&quot;: &lt;notify url&gt;,
        &quot;callbackData&quot;: &lt;callback data&gt;
    },
    &quot;senderName&quot;: &lt;sender name&gt;
    }
}
</code></pre>

<p>Receiving all messages:</p>

<pre><code>GET /service/messaging/smsmessaging/inbound/registrations/tel:&lt;receiver phone number&gt;/messages
Host: ...
Authorization: Basic ...

HTTP/1.1 200 OK
{
     &quot;inboundSMSMessageList&quot;: [
        {
            &quot;inboundSMSMessage&quot;: {
            &quot;dateTime&quot;: &quot;&lt;date&gt;&quot;,
            &quot;destinationAddress&quot;: &quot;&lt;destination address&gt;&quot;,
            &quot;messageId&quot;: &quot;&lt;message id&gt;&quot;,
            &quot;message&quot;: &quot;&lt;message&gt;&quot;,
            &quot;resourceURL&quot;: &quot;&lt;resource url&gt;&quot;,
            &quot;senderAddress&quot;: &quot;&lt;sender address&gt;&quot;
        }
     ]
}
</code></pre>

<p>Receiving a specific message:</p>

<pre><code>GET /service/messaging/smsmessaging/inbound/registrations/tel:&lt;receiver phone number&gt;/messages/&lt;message id&gt;
Host: ...
Authorization: Basic ...

HTTP/1.1 200 OK
{
    &quot;inboundSMSMessage&quot;: {
        &quot;dateTime&quot;: &quot;&lt;date&gt;&quot;,
        &quot;destinationAddress&quot;: &quot;&lt;destination address&gt;&quot;,
        &quot;messageId&quot;: &quot;&lt;message id&gt;&quot;,
        &quot;message&quot;: &quot;&lt;message&gt;&quot;,
        &quot;resourceURL&quot;: &quot;&lt;resource url&gt;&quot;,
        &quot;senderAddress&quot;: &quot;&lt;sender address&gt;&quot;
    }
}
</code></pre>

  </article>
  
  <article id="troubleshooting" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#troubleshooting">
        <span class="fa fa-link"></span>
      </button>
      Troubleshooting</h2>
    

<p>This section describes common problems and their solutions.</p>

<h3 id="ssl-or-certificate-errors">SSL or certificate errors</h3>

<p>You can use both HTTP and HTTPS from the Java client libraries. To use HTTPS, you may need to import the Cumulocity production certificate into your Java runtime environment. <a href="/guides/cumulocity.com.cert" title="cumulocity.com certificate">Download</a> the certificate and import it using the following command on the command line:</p>

<pre><code>$JAVA_HOME/bin/keytool -import -alias cumulocity -file cumulocity.com.crt -storepass changeit
</code></pre>

<p>Answer &ldquo;yes&rdquo; to the question &ldquo;Trust this certificate? [no]:&ldquo;.</p>

<p>Use the following argument to run Java:</p>

<pre><code>-Djavax.net.ssl.trustStore=&lt;&lt;home directory&gt;&gt;/.keystore
</code></pre>

<p>If you use Eclipse/OSGi, open the <strong>Run Configurations&hellip;</strong> dialog in the <strong>Run</strong> menu. Double-click <strong>OSGi Framework</strong>, then open the <strong>Arguments</strong> tab on the right side. In the <strong>VM arguments</strong> text box, add the above parameter.</p>

<p>Since Java ships with its own set of trusted root certificates, you might still get the error message:</p>

<pre><code>java.security.cert.CertificateException: Certificate Not Trusted
</code></pre>

<p>In this case, make sure that the Go Daddy Certificate Authority (CACert) is available for your JAVA environment using:</p>

<pre><code>keytool -import -v -trustcacerts -alias root -file gd_bundle.crt -keystore $JAVA_HOME/lib/security/cacerts
</code></pre>

<p>gd_bundle.crt can be downloaded directly from the <a href="https://certs.godaddy.com/anonymous/repository.pki">GoDaddy repository</a>.</p>

<h3 id="when-i-install-the-sdk-eclipse-complains-about-compatibility-problems">When I install the SDK, Eclipse complains about compatibility problems</h3>

<p>Make sure that you use the &ldquo;Target Platform&rdquo; preferences page to install the SDK as described in the instructions. &ldquo;Install New Software&rdquo; installs software into your running Eclipse IDE, but we need to install the SDK as a separate server software.</p>

<h3 id="expected-to-find-an-object-at-table-index-when-running-an-agent-or-application">&ldquo;Expected to find an object at table index&rdquo; when running an agent or application</h3>

<p>This error occurs due to a bug in particular Eclipse versions. As a workaround, select <strong>Run</strong> from the main menu and then <strong>Run Configurations &hellip;</strong>. On the left, select the launch configuration that you have been using, e.g. <strong>OSGi Framework</strong>. On the right, click the <strong>Arguments</strong> tab. Append a &ldquo; -clean&rdquo; to the <strong>Program Arguments</strong> and click <strong>Apply</strong>.</p>

<h3 id="the-agent-or-application-won-t-start">The agent or application won&rsquo;t start</h3>

<p>Check if all required plug-ins are checked in your launch configuration. Go to <strong>Run</strong> &gt; <strong>Run Configurations</strong> and select the <strong>OSGi Framework</strong> launch configuration. Click <strong>Select All</strong> and try running again.</p>

<p>Check if the required plug-ins are started. While the application or agent is running, type &ldquo;ss&rdquo; into the console and hit the return key. All listed plug-ins should be either in the ACTIVE or RESOLVED state.</p>

<p>Check if you are using the correct target platform. Go to the <strong>Target Platform</strong> page in the preferences and check if &ldquo;Cumulocity runtime&rdquo; is checked.</p>

<h3 id="the-agent-will-not-compile-i-get-access-restriction-messages">The agent will not compile, I get &ldquo;Access Restriction&rdquo; messages</h3>

<p>This error may be caused because of a missing package import. Navigate to the <strong>Dependencies</strong> tab of the project manifest file and check if the package of the type that contains the method giving the access restrictionÂ is present in the Import-Package section.</p>

<p>You can find the packageÂ by opening the declaration of the method (right-click and select <strong>Open Declaration</strong> from the context menu).</p>

<h3 id="when-starting-an-application-i-get-address-already-in-use-messages">When starting an application, I get &ldquo;address already in use&rdquo; messages</h3>

<p>Check if you are running another instance of the application. Click on the Display Selected Console icon in the console toolbar (the terminal icon) to browse through your consoles. Terminate other running instances by clicking the red Stop icon in the toolbar.</p>

<p>Under Unix/MacOSX you can also use the <em>lsof</em> command to see which process is using a particular port. For example, to see which process is using TCP port 8080 enter:</p>

<pre><code>lsof -i tcp:8080
</code></pre>

<p>which will return something like</p>

<pre><code>COMMAND PID USER FD TYPE DEVICE SIZE/OFF NODE NAME java 12985 pitchfor 45u IPv6 0x077c76d0 0t0 TCP *:8080 (LISTEN)
</code></pre>

<p>so process 12985 is using that port which can then be killed if necessary.</p>

  </article>
  
  
</div>
<footer class="main-footer">
  <div class="copyright">
    <div class="container text-center">
      <p class="small ">&copy; 2019 Cumulocity GmbH | All rights reserved.</p>
    </div>
  </div>  
</footer>

<!-- Essential Scripts -->

<!-- jQuery -->
<script src="https://cumulocity.com/guides/js/vendor/jquery.min.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/bootstrap.bundle.min.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/clipboard.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/zoom.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/highlight.min.js"></script>
<script src="https://cumulocity.com/guides/js/main.js"></script>





    
   
  </body>
</html>
