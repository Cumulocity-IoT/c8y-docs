<!DOCTYPE html>
<html>
<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <base href="" />
    <meta name="generator" content="Hugo 0.54.0 with theme C8yDocs">
    <title>Microservice SDK for C# - Cumulocity IoT Guides</title>
    <meta name="author" content="Carlos Ceia @ Cumulocity">
    <meta name="keywords" content=", Software AG Cloud, Cumulocity IoT, Internet of things, analytics, devices, connect">


    <link rel="icon" href="/favicon.ico">

    

    

    
    
    
    <link rel="stylesheet" href="https://cumulocity.com/guides/style.css">
    

      
      <script> window.zEmbed||function(e,t){var n,o,d,i,s,a=[],r=document.createElement("iframe");window.zEmbed=function(){a.push(arguments)},window.zE=window.zE||window.zEmbed,r.src="javascript:false",r.title="",r.role="presentation",(r.frameElement||r).style.cssText="display: none",d=document.getElementsByTagName("script"),d=d[d.length-1],d.parentNode.insertBefore(r,d),i=r.contentWindow,s=i.document;try{o=s}catch(c){n=document.domain,r.src='javascript:var d=document.open();d.domain="'+n+'";void(0);',o=s}o.open()._l=function(){var o=this.createElement("script");n&&(this.domain=n),o.id="js-iframe-async",o.src=e,this.t=+new Date,this.zendeskHost=t,this.zEQueue=a,this.body.appendChild(o)},o.write('<body onload="document._l();">'),o.close()}("https://assets.zendesk.com/embeddable_framework/main.js","cumulocity.zendesk.com"); </script>
        <script type="text/JavaScript">
          window.zESettings = {
            webWidget: {
              color: {
                theme: '#1776bf'    
              },
              position: {
                horizontal: 'right',
                vertical: 'top'     
              }
            }
          };
          </script>
        
        
   
  </head><body data-spy="scroll" data-target="#main-nav" ><button type="button" class="sidebar-toggle">
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span class="icon-bar"></span>
  <span>MENU</span>
</button>
<nav class="main-top-bar" >
  <div class="d-flex container">
    <ul class="nav d-flex flex-start hidden-xs nav-left">
      <li><a href="https://www.softwareag.cloud/site/product/cumulocity-iot.html">Cumulocity IoT</a></li>
      <li><a href="http://resources.cumulocity.com/documentation/jssdk/latest/#/api">Cumulocity Angular API</a></li>
    </ul>
    <ul class="nav flex-end nav-right">
      <li>   <script>
              (function() {
                var cx = '008969372384807682938:yeh7xt785g4';
                var gcse = document.createElement('script');
                gcse.type = 'text/javascript';
                gcse.async = true;
                gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(gcse, s);
              })();
            </script>
        <div id="___gcse_0" dir="ltr"><form class="gsc-search-box gsc-search-box-tools" accept-charset="utf-8"><div class="table-responsive"><table cellspacing="0" cellpadding="0" class="gsc-search-box"><tbody><tr><td class="gsc-input"><div class="gsc-input-box" id="gsc-iw-id1"><table cellspacing="0" cellpadding="0" id="gs_id50" class="gstl_50 gsc-input" style="width: 100%; padding: 0px;"><tbody><tr><td id="gs_tti50" class="gsib_a"><input autocomplete="off" type="text" size="10" class="gsc-input" name="search" title="search" id="gsc-i-id1" placeholder="Custom Search" dir="ltr" spellcheck="false" x-webkit-grammar="builtin:search" lang="en" style="width: 100%; padding: 0px; border: none; margin: -0.0625em 0px 0px; height: 1.25em; background: url(&quot;https://www.google.com/cse/static/images/1x/googlelogo_lightgrey_46x16dp.png&quot;) left center no-repeat rgb(255, 255, 255); text-indent: 48px; outline: none;"></td><td class="gsib_b"><div class="gsst_b" id="gs_st50" dir="ltr"><a class="gsst_a" href="javascript:void(0)" style="display: none;" title="Clear search box" role="button"><span class="gscb_a" id="gs_cb50" aria-hidden="true">Ã—</span></a></div></td></tr></tbody></table></div></td><td class="gsc-search-button"><button class="gsc-search-button gsc-search-button-v2"><svg width="13" height="13" viewBox="0 0 13 13"><title>search</title><path d="m4.8495 7.8226c0.82666 0 1.5262-0.29146 2.0985-0.87438 0.57232-0.58292 0.86378-1.2877 0.87438-2.1144 0.010599-0.82666-0.28086-1.5262-0.87438-2.0985-0.59352-0.57232-1.293-0.86378-2.0985-0.87438-0.8055-0.010599-1.5103 0.28086-2.1144 0.87438-0.60414 0.59352-0.8956 1.293-0.87438 2.0985 0.021197 0.8055 0.31266 1.5103 0.87438 2.1144 0.56172 0.60414 1.2665 0.8956 2.1144 0.87438zm4.4695 0.2115 3.681 3.6819-1.259 1.284-3.6817-3.7 0.0019784-0.69479-0.090043-0.098846c-0.87973 0.76087-1.92 1.1413-3.1207 1.1413-1.3553 0-2.5025-0.46363-3.4417-1.3909s-1.4088-2.0686-1.4088-3.4239c0-1.3553 0.4696-2.4966 1.4088-3.4239 0.9392-0.92727 2.0864-1.3969 3.4417-1.4088 1.3553-0.011889 2.4906 0.45771 3.406 1.4088 0.9154 0.95107 1.379 2.0924 1.3909 3.4239 0 1.2126-0.38043 2.2588-1.1413 3.1385l0.098834 0.090049z"></path></svg></button></td><td class="gsc-clear-button"><div class="gsc-clear-button" title="clear results">&nbsp;</div></td></tr></tbody></table></div></form></div>
      </li>
    </ul>
  </div>
</nav><button type="button" class="to-the-top">
  <span class="sr-only">Top</span>
  <span class="fa fa-chevron-up"></span>
</button><nav class="main-nav navbar">
  <header class="nav-header">
    <a href="https://www.softwareag.cloud/site/dev-center/cumulocity-iot.html">
      <img src="https://cumulocity.com/guides/images/cumulocity-iot.svg"
        class="img-responsive no-zoom"
        alt="Cumulocity IoT">
    </a>

    <div class="dropdown">
      <button class="dropdown-toggle"
        type="button"
        id="dropdownMenuButton"
        data-toggle="dropdown"
        aria-haspopup="true"
        aria-expanded="false">
        <span id="current-dropdown-toggle" class="text-truncate"></span> <span class="caret"></span>
      </button>
      <div class="dropdown-menu"
        aria-labelledby="dropdownMenuButton">
        
        
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/release-notes/overview/'><i class="c8y-icon c8y-icon-notification"></i> Release notes</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/concepts/introduction/'><i class="c8y-icon c8y-icon-c8y-data"></i> Concepts guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/users-guide/getting-started/'><i class="c8y-icon c8y-icon-user"></i> User guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/benutzerhandbuch/overview/'><i class="c8y-icon c8y-icon-user"></i> Handbuch</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/devices/overview/'><i class="c8y-icon c8y-icon-device-management"></i> Device guides</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/edge/overview/'><i class="fa fa-book"></i> Cumulocity IoT Edge</a>
        
        
        
        
        
        
        
        

        
        
        
        
        <span class="current-app">Microservice SDK guide</span>
        
        

        <a class='dropdown-menu-item active'
          href='https://cumulocity.com/guides/microservice-sdk/introduction/'><i class="c8y-icon c8y-icon-tools"></i> Microservice SDK guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/device-sdk/introduction/'><i class="c8y-icon c8y-icon-tools"></i> Device SDK guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/web/introduction/'><i class="c8y-icon c8y-icon-smart-rest"></i> Web SDK guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/apama/overview-analytics/'><i class="c8y-icon c8y-icon-data-explorer"></i> Analytics guide</a>
        
        
        
        
        
        
        
        

        
        
        

        <a class='dropdown-menu-item '
          href='https://cumulocity.com/guides/reference/rest-implementation/'><i class="fa fa-book"></i> Reference guide</a>
        
      </div>
    </div>
  </header>

  

  <nav id="main-nav"
    class="nav-sections">
    
    
    <div class="">
        
        
        
        
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/introduction/">Microservices SDK</a>
     
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav1"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/concept/">General aspects</a>
     
      
      
      <div id="page-nav1"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#overview">Overview</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#docker">Docker image and container</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#manifest">Microservice manifest</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#isolation-levels">Microservice isolation levels</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#scaling">Scaling</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#security">Security</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#environment-variables">Environment variables</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#packaging">Packaging</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#request-routing">Request routing</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#requirements">Microservice requirements</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#operation">Operating microservices</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/concept/#deployment">Deploying microservices</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav2"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/java/">Microservice SDK for Java</a>
     
      
      
      <div id="page-nav2"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/java/#introduction">Overview</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/java/#java-microservice">Hello microservice!</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/java/#developing-microservice">Developing Microservices</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/java/#developing-services-client">Developing Java clients for services</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/java/#troubleshooting">Troubleshooting</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class=" slot-active ">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav3"
        class="collapse-btn ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=" active "
        href="https://cumulocity.com/guides/microservice-sdk/cs/">Microservice SDK for C#</a>
     
      
      
      <div id="page-nav3"
        class="collapse   show  ">
        <nav class="list-group nav">
          
          
          <a class="list-group-item"
            href="#introduction">Overview</a>
          
            
          
          <a class="list-group-item"
            href="#hello-world-basic">Hello, world!</a>
          
            
          
          <a class="list-group-item"
            href="#developing-microservice">Developing Microservices</a>
          
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav4"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/rest/">Using the REST interface</a>
     
      
      
      <div id="page-nav4"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#overview">Overview</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#microservice-development">Microservice development</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#application-development">Application development</a>
            
            
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/rest/#smartrest">Using SmartREST</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    <div class="">
        
        
        
        
      <a href="javascript:void(0);"
        data-toggle="collapse"
        data-target="#page-nav5"
        class="collapse-btn  collapsed ">
        <i class="fa fa-chevron-right "></i>
      </a>
      
      <a class=""
        href="https://cumulocity.com/guides/microservice-sdk/http/">Python example</a>
     
      
      
      <div id="page-nav5"
        class="collapse   ">
        <nav class="list-group nav">
          
          
            <a class="list-group-item"
              href="https://cumulocity.com/guides/microservice-sdk/http/#hello-microservice-python">Hello Microservice Python</a>
            
            
        </nav>
      </div>
      
    </div>
    
    
    
    
  </nav>
</nav>
<div class="cover"></div>

<div class="main-content">
  <article class="page-section">
    <header class="section-header">
      <h1 class="text-light">Microservice SDK for C#</h1>
    </header>
    
      <div class="lead">
        <p>This section describes how to develop and deploy microservices on top of Cumulocity using the Microservice SDK for C#.</p>

      </div>
      
  </article>

  
  
  
  <article id="introduction" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#introduction">
        <span class="fa fa-link"></span>
      </button>
      Overview</h2>
    

<p>Using Microservice SDK for C#, you can develop microservices in C#. This section explains:</p>

<ul>
<li><p><a href="#general-prerequisites">General prerequisites</a>: What do you need to develop and run C# microservices?</p></li>

<li><p><a href="/guides/microservice-sdk/cs#hello-world-basic">Hello World</a>: Run you first C# microservice</p></li>

<li><p><a href="/guides/microservice-sdk/cs#developing-microservice">Developing C# microservices</a></p></li>
</ul>

<p>The most simple starting point is the <a href="/guides/microservice-sdk/cs#hello-world-basic">C# Hello World example</a>.</p>

<blockquote>
<p><strong>Info</strong>: You can develop Cumulocity with any IDE and any build tool that you prefer, but the examples focus on  Cake (C# Make) and Visual Studio.</p>
</blockquote>

<h3 id="a-name-general-prerequisites-a-development-prerequisites"><a name="general-prerequisites"></a> Development prerequisites</h3>

<p>To use the C# client libraries for development, you need to install .NET Core SDK for the your development platform such as Windows, Linux or Mac (at least Version 2 of the <a href="https://www.microsoft.com/net/download/windows">.NET Core SDK</a>). Note that .NET Core Runtime and .NET Core SDK are different things.</p>

<p>To verify the version of your .NET Core SDK, type</p>

<pre><code>$ dotnet --info
</code></pre>

<p>The output must show a version number later than &ldquo;2.0.0&rdquo; to perform the basic examples.</p>

<p>For Docker installation, review the information at <a href="https://docs.docker.com/docker-for-windows/install/#what-to-know-before-you-install">Docker for Windows: What to know before you install</a> and install <a href="https://docs.docker.com/docker-for-windows/install/">Docker For Windows</a>.</p>

<p>For .NET development, Microsoft provides a number of different images depending on what you are trying to achieve.</p>

<p>Whether you need the .NET Core SDK or the .NET Core runtime depends on what you want to do:</p>

<ul>
<li><p>.NET Core SDK - includes tools and libraries to <strong>build</strong> .NET Core applications.</p></li>

<li><p>.NET Core Runtime - is required to <strong>run</strong> .NET Core applications.</p></li>
</ul>

<h4 id="windows-system-requirements">Windows system requirements</h4>

<ul>
<li>Powershell (at least Version 6 or Core)</li>
<li>.NET Core SDK (at least Version 2.0)</li>
<li>Docker for Windows (at least Version  17.06)</li>
</ul>

<h4 id="unix-system-requirements">Unix system requirements</h4>

<ul>
<li>.NET Core SDK (at least Version 2 .0)</li>
<li>Docker (at least Version  17.06)</li>
<li>Mono (at least Version  5.4.0)</li>
</ul>

<h3 id="runtime-prerequisites">Runtime prerequisites</h3>

<p>The most important requirement is an installation of <a href="https://docs.docker.com/release-notes/docker-ce/">Docker 17.06</a> or later of the Docker client.</p>

<p>Recommended as production image is microsoft/dotnet:<version>-runtime: This image contains the .NET Core (runtime and libraries) and is optimized for running .NET Core apps.</p>

<p>Assumed, only Linux containers are supported. However, for the development itself it is possible to use Windows containers.</p>

<p>The SDK is based on the package Cumulocity.SDK.Microservices has dependency on:</p>

<ul>
<li>Cumulocity.AspNetCore.Authentication.Basic - a package wrapper around <a href="https://github.com/bruno-garcia/Bazinga.AspNetCore.Authentication.Basic">Bazinga.AspNetCore.Authentication.Basic</a> Ensures adding basic authentication to Asp.Net Core in the right way because ASP.NET Core 2.0 introduced breaking changes to Authentication and Identity. From this version of the web framework Microsoft doesn&rsquo;t ship a Basic Authentication package with ASP.NET Core Security.</li>
</ul>

  </article>
  
  <article id="hello-world-basic" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#hello-world-basic">
        <span class="fa fa-link"></span>
      </button>
      Hello, world!</h2>
    

<h3 id="overview">Overview</h3>

<p>This section provides an example of a C# microservice in Cumulocity. It uses Cake (C# Make), which is a cross-platform build automation system.</p>

<p>To start building .NET apps, you just need to download and install the <a href="https://www.microsoft.com/net/download">.NET SDK</a>. Follow the instructions on the download page for the last stable release or alternatively you can also try using 2.0.</p>

<p>If you use Linux, visit the <a href="http://www.monodevelop.com/">MonoDevelop website</a> for download packages and more details about our cross-platform IDE. Follow the instructions on the download page for the last stable release or alternatively you can also try using 5.4 or higher version of mono <a href="http://www.mono-project.com/download/#download-lin">IDE</a>. Note, that Mono-devel is required to compile code.</p>

<p>The initial script was used to create a demo, which makes it easier to create an example microservice project with dependency management and then deploy it on the server. The script attempts to download the package from the sources listed in the project file and next a reference is added to the appropriate project file. In addition, the script creates the appropriate Docker file to take into account the naming of projects. Next it will create a Docker image based on a Docker file.</p>

<p>The application created in this way uses the ASP.NET Web API framework to create a web API. The API runs on an isolated web server called Kestrel and as a foreground job, which makes it work really well with Docker.</p>

<h3 id="building-and-deploying-hello-world-on-windows">Building and deploying Hello World on Windows</h3>

<p>Building and deploying &ldquo;Hello World&rdquo; on Windows is similar to the way it is done for Linux. For Windows, powershell is installed by default and that&rsquo;s why we use it.</p>

<p>Download a script file to build a &ldquo;Hello World&rdquo; application. Manage the version of scripts and replace X.X.X to the right version number.</p>

<pre><code>Invoke-WebRequest  http://resources.cumulocity.com/cssdk/releases/microservicesdk-win-dev-latest.zip -OutFile microservicesdk-win-dev-X.X.X.zip
</code></pre>

<p>The latest can be replaced by the version number e.g. microservicesdk-lin-dev-{X.X.X}.zip.</p>

<p>Once you have downloaded the source, unzip the file.</p>

<pre><code>Expand-Archive c:\microservicesdk-win-dev-X.X.X.zip -DestinationPath c:\microservicesdk-win-dev-X.X.X
</code></pre>

<p>Change the current folder and navigate to a microservicesdk folder.</p>

<pre><code>cd microservicesdk-win-dev-X.X.X
</code></pre>

<p>Run the script &ldquo;create.ps1&rdquo; to create a sample project, provide the name of the project and the API application.</p>

<pre><code>./create.ps1
</code></pre>

<p>Execute the bootstrapper script to build the application and an image from a Docker file.</p>

<pre><code>./build.ps1
</code></pre>

<p>In order to deploy the application run the deploy script. You must provide the correct URL and credentials in this script.</p>

<p><strong>How to call the script</strong></p>

<ul>
<li>Call &ldquo;deploy.ps1&rdquo;

<ul>
<li>The script looks for a settings.ini in the same directory. If found, it uses the credentials and tenant URL from that file.</li>
<li>If settings.ini is not found, an error is shown.
<br /></li>
</ul></li>
</ul>

<pre><code>    ./deploy.ps1
</code></pre>

<ul>
<li>Call the script with the .ini name

<ul>
<li>Loads the credentials and tenant URL from settings_alternativ.ini.</li>
<li>If settings_alternative.ini is not found, an error is shown.
<br /></li>
</ul></li>
</ul>

<pre><code>    ./deploy.ps1 -f settings.ini
</code></pre>

<ul>
<li>Merge the given arguments and ini configuration. Parameters from the file are overwritten by explicitly defined parameters.

<ul>
<li>deploy.ps1  -an hello-world -f settings_alternative.ini</li>
</ul></li>
</ul>

<pre><code>    ./deploy.sh -s {siteurl} -u {username} -p {password}  -an hello-world -f settings.ini
</code></pre>

<p>The ini sample:</p>

<pre><code>[deploy]
username=tenant/user
password=pass
url=someurl
appname=sample_application
</code></pre>

<p>The application starts executing from the entry point <code>public static void Main()</code> in Program class where the host for the application is created. The following shows an example of a program created by &ldquo;create.sh&rdquo;.</p>

<pre><code>namespace api
{
using System.Net;
public class Program
{
    public static void Main(string[] args)
    {
        BuildWebHost(args).Run();
    }
    public static IWebHost BuildWebHost(string[] args) =&gt;

            WebHost.CreateDefaultBuilder(args)
            .ConfigureLogging((hostingContext, logging) =&gt;
            {
                logging.AddConfiguration(hostingContext.Configuration.GetSection(&quot;Logging&quot;));
                logging.AddConsole();
                logging.AddDebug();
            })
            .UseStartup&lt;Startup&gt;()
            .UseKestrel(options =&gt;
            {
                var env = Environment.GetEnvironmentVariable(&quot;ASPNETCORE_ENVIRONMENT&quot;);
                var port = Environment.GetEnvironmentVariable(&quot;SERVER_PORT&quot;);
                int portNumber = 8080;
                if (Int32.TryParse(port, out portNumber))
                {
                    options.Listen(IPAddress.Parse(&quot;0.0.0.0&quot;), portNumber);
                }
                else
                {
                    options.Listen(IPAddress.Parse(&quot;0.0.0.0&quot;), 1);
                }
            })
            .Build();
    }

}
</code></pre>

<p>Method BuildWebHost performs the following tasks:</p>

<ul>
<li><p>Initializes a new instance of the WebHostBuilder class with pre-configured defaults</p></li>

<li><p>Specifies Kestrel as the server to be used by the web host</p></li>

<li><p>Configures the LoggerFactory</p></li>

<li><p>Specifies the Startup class with the UseStartup&#60;TStartup&#62;</p></li>
</ul>

<p>An example application must include Startup class. As the name suggests, it is executed first when the application starts.</p>

<pre><code>public class Startup
{
    public IConfiguration Configuration { get; }

    public Startup(IConfiguration configuration)
    {
        Configuration = configuration;
    }

    public void ConfigureServices(IServiceCollection services)
    {
        services.AddCumulocityAuthentication(Configuration);
        services.AddPlatform(Configuration);
        services.AddSingleton&lt;IApplicationService, ApplicationService&gt;();
        services.AddSingleton&lt;IHttpContextAccessor, HttpContextAccessor&gt;();
        services.AddMvc().AddJsonOptions(options =&gt; options.SerializerSettings.ContractResolver = new DefaultContractResolver());

    }

    public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
    {
        app.UseAuthentication();
        app.UseBasicAuthentication();
        app.UseMvcWithDefaultRoute();
    }

}
</code></pre>

<p>Startup.cs responsibilities:</p>

<ul>
<li>Setup configuration in the Startup constructor</li>
<li>Setup dependency injection in ConfigureServices</li>
<li>Setup the middleware pipeline in Configure</li>
</ul>

<p><strong>Dockerfile</strong> created by &ldquo;create.ps1&rdquo;:</p>

<pre><code>FROM microsoft/dotnet:2.0-runtime
WORKDIR /app
COPY ./publish/Web ./
ENV SERVER_PORT 4700
ENTRYPOINT [&quot;dotnet&quot;, &quot;api.dll&quot;]
</code></pre>

<p><strong>Dockerfile</strong> defines what goes on in the environment inside a container:</p>

<ul>
<li><p>Sets the working directory</p></li>

<li><p>Copies all from an application directory to the working directory</p></li>

<li><p>Sets the environment variable, in this case SERVER_PORT</p></li>

<li><p>Specifies what executable to run when the container starts</p></li>
</ul>

<h3 id="building-and-deploying-hello-world-on-linux">Building and deploying Hello World on Linux</h3>

<p>Download a script file to build a &ldquo;Hello World&rdquo; app. Wget utility is the best option to download a file.</p>

<pre><code>sudo wget  http://resources.cumulocity.com/cssdk/releases/microservicesdk-lin-dev-latest.zip
</code></pre>

<p>The latest can be replaced by the version number e.g. microservicesdk-lin-dev-{X.X.X}.zip.</p>

<p>Once you have downloaded the source, unzip the file.</p>

<pre><code>unzip microservicesdk-lin-dev-latest.zip -d  microservicesdk-latest
</code></pre>

<p>Change the current folder, to navigate to a microservicesdk folder.</p>

<pre><code>cd microservicesdk-latest
</code></pre>

<p>Run the script &ldquo;create.sh&rdquo; to create a sample project, provide the name of the project and the API application.</p>

<pre><code>./create.sh

Enter the solution name:

&lt;&lt;demo&gt;&gt;

Enter the name of a web API project:

&lt;&lt;api&gt;&gt;
</code></pre>

<p>For a working cake you need the &ldquo;build.sh&rdquo; or &ldquo;build.ps1&rdquo; file to bootstrap cake and the &ldquo;build.cake&rdquo; file. &ldquo;build.sh&rdquo; and &ldquo;build.ps1&rdquo; are bootstrapper scripts that ensure you have Cake and other required dependencies installed. The bootstrapper scripts are also responsible for invoking Cake. &ldquo;Build.cake&rdquo; is the actual build script.</p>

<p>&ldquo;build.cake&rdquo; contains tasks representing a unit of work in Cake, and you may use them to perform specific work in a specific weight:</p>

<ul>
<li><p>Clean</p></li>

<li><p>Build</p></li>

<li><p>DotnetPublish</p></li>

<li><p>SingleDockerImage</p></li>
</ul>

<p>Execute the bootstrapper script, to build the application and an image from a Docker file.</p>

<pre><code>./build.sh
</code></pre>

<p>Launch the Docker container with the command</p>

<pre><code>docker run -p 8999:4700 imagename:latest
</code></pre>

<p>Check the status of an application that is running inside the Docker container.</p>

<pre><code>curl http://localhost:8999/api/values
</code></pre>

<p>In order to deploy the application run the deploy script. You must provide the correct URL and credentials in this script.</p>

<p><strong>How to call the script</strong></p>

<ul>
<li>Call &ldquo;deploy.sh&rdquo;

<ul>
<li>The script looks for a settings.ini in the same directory. If found, uses the credentials and tenant URL from that file.</li>
<li>If settings.ini is not found, an error is shown.
<br /></li>
</ul></li>
</ul>

<pre><code>    ./deploy.sh
</code></pre>

<ul>
<li>Call the script with the .ini name

<ul>
<li>Loads the credentials and tenant URL from settings_alternativ.ini.</li>
<li>If settings_alternative.ini is not found, an error is shown.
<br /></li>
</ul></li>
</ul>

<pre><code>    ./deploy.sh -f settings.ini
</code></pre>

<ul>
<li>Merge the given arguments and ini configuration. Parameters from the file are overwritten by explicitly defined parameters.

<ul>
<li>deploy.sh  -an hello-world -f settings_alternative.ini
<br /></li>
</ul></li>
</ul>

<pre><code>    ./deploy.sh -s {siteurl} -u {username} -p {password}  -an hello-world -f settings.ini
</code></pre>

<p>The ini sample:</p>

<pre><code>[deploy]
username=tenant/user
password=pass
url=someurl
appname=sample_application
</code></pre>

  </article>
  
  <article id="developing-microservice" class="page-section">
    <h2>
      <button class="btn-link bookmark" data-clipboard-text="#developing-microservice">
        <span class="fa fa-link"></span>
      </button>
      Developing Microservices</h2>
    

<h3 id="overview">Overview</h3>

<p>The SDK is based on ASP.NET Core, a cross-platform, high-performance, open-source framework for building modern, cloud-based, Internet-connected applications. ASP.NET Core apps use a Startup class, which is named Startup by convention. The Startup class</p>

<ul>
<li>must include a Configure method to create the app&rsquo;s request processing pipeline.</li>
<li>can optionally include a ConfigureServices method to configure the app&rsquo;s services.</li>
</ul>

<p>This document describes microservice SDK features, services, configuration files, logging and Cake (C# Make).</p>

<p>There are two possible deployment types on the platform:</p>

<ul>
<li>Hosted deployment - the default for microservices. For typical use cases the hosted deployment is the suggested one.</li>
<li>External/legacy deployment - requires custom installation of the platform and agent.</li>
</ul>

<p>For development and testing purposes you can deploy a microservice on a local docker. The process is described in this document.</p>

<h3 id="microservice-security">Microservice security</h3>

<p>The Configure method is used to specify how the application responds to HTTP requests. The request pipeline is configured by adding middleware components to an IApplicationBuilder instance.</p>

<p>The UseAuthentication method adds a single authentication middleware component which is responsible for automatic authentication and the handling of remote authentication requests. It replaces all of the individual middleware components with a single, common middleware component. Since ASP.NET Security does not include Basic Authentication middleware we must add custom Basic Authentication middleware.</p>

<pre><code>public void Configure(IApplicationBuilder app, IHostingEnvironment env)
{
    app.UseAuthentication();
    app.UseBasicAuthentication();
}
</code></pre>

<p>Next, each authentication scheme is registered in the ConfigureServices method of Startup.cs.</p>

<pre><code>public void ConfigureServices(IServiceCollection services)
{
    services.AddCumulocityAuthentication(Configuration);
}
</code></pre>

<h3 id="platform">Platform</h3>

<p>The root interface for connecting to Cumulocity from C# is called &ldquo;Platform&rdquo;. It provides access to all other interfaces of the platform, such as the inventory. In its simplest form, it is instantiated as follows.</p>

<p>To enable service providers to run microservices together with the platform, it is required to execute the registration procedure. During this process each microservice receives a dedicated bootstrap user to ensure that the microservice can be identified by the platform and can only access allowed resources.</p>

<p>The platform is registered with the dependency injection container. Services that are registered with the dependency injection (DI) container are available to the controllers.</p>

<pre><code>public void ConfigureServices(IServiceCollection services)
{
    // ...
     services.AddPlatform(Configuration);
}
</code></pre>

<p>where Configuration represents a set of key/value application configuration properties.</p>

<pre><code>public IConfiguration Configuration { get; }

public Startup(IConfiguration configuration)
{
    Configuration = configuration;
}
</code></pre>

<p>This way microservices should receive very basic configuration. Besides properties related to the isolation level, microservices will receive the following variables:</p>

<ul>
<li>C8Y_BASEURL - URL which points to the core platform</li>
<li>C8Y_BASEURL_MQTT - URL which points to the core platform with MQTT protocol</li>
<li>SERVER_PORT - Port on which the microservice should run</li>
<li>C8Y_MICROSERVICE_ISOLATION - Isolation level</li>
<li>C8Y_TENANT - Application user tenant (available only for PER_TENANT isolation)</li>
<li>C8Y_USER - Application user name (available only for PER_TENANT isolation)</li>
<li>C8Y_PASSWORD - Application user password (available only for PER_TENANT isolation)</li>
<li>C8Y_BOOTSTRAP_TENANT - Bootstrap user to get platform subscriptions</li>
<li>C8Y_BOOTSTRAP_USERNAME - Bootstrap user to get platform subscriptions</li>
<li>C8Y_BOOTSTRAP_PASSWORD - Bootstrap user to get platform subscriptions</li>
</ul>

<h3 id="role-based-authorization">Role-based authorization</h3>

<p>Once a user has been authenticated, the next step is to check if the user is authorized to do what they&rsquo;re trying to do.</p>

<pre><code>[Authorize]
public IActionResult Index()
{
  return View();
}
</code></pre>

<p>The authorize attribute is used to protect an action in a controller from being called. If no conditions have been specified, any user who is authenticated is able to perform the action.</p>

<p>To be more specific and allow only members of a certain role (in this case the ROLE_APPLICATION_MANAGEMENT_READ role) to perform actions in a controller, add the role as a requirement to the attribute like this:</p>

<pre><code>[Authorize(Roles = &quot;ROLE_APPLICATION_MANAGEMENT_READ&quot;)]
public class HomeController : Controller
{

    public HomeController(Platform platform)
    {

    }
}
</code></pre>

<h3 id="accessing-httpcontext-in-asp-net-core">Accessing HTTPContext in ASP.net Core</h3>

<p>In earlier versions of .Net Core, IHttpContextAccessor was automatically registered. This was removed. You need to register it manually if you intend to use it inside services. IHttpContextAccessor is only intended for accessing the HttpContext in locations where it&rsquo;s not directly available.</p>

<pre><code>public void ConfigureServices(IServiceCollection services)
{
    // ...
     services.AddSingleton&lt;IHttpContextAccessor, HttpContextAccessor&gt;();
}
</code></pre>

<h3 id="building-a-scheduled-task">Building a scheduled task</h3>

<p>In order to add a new scheduled task, add it as shown in the example below. All scheduled tasks should look similar to</p>

<pre><code>public class SomeTask : IScheduledTask
{
    public string Schedule =&gt; &quot;0 1/6 * * *&quot;;

    public async Task ExecuteAsync(CancellationToken cancellationToken)
    {
        //...
    }
}
</code></pre>

<p>where the Schedule property is a cron expression and ExecuteAsync() method is the work to execute asynchronously.</p>

<p>Then you can easily register scheduled tasks</p>

<pre><code>public void ConfigureServices(IServiceCollection services)
{
    // ...
    // Add scheduled tasks
    services.AddSingleton&lt;IScheduledTask, SomeTask&gt;();
}
</code></pre>

<h3 id="microservice-subscription">Microservice subscription</h3>

<p>The following section refers to the user management as described under <a href="/guides/microservice-sdk/concept">General concept of microservices in Cumulocity</a>.</p>

<p>This SDK has a task CurrentApplicationSubscriptionsTask, which only fetches a list of all subscriptions. The CurrentApplicationSubscriptionsTask is the IScheduledTask implementation which runs every hour:</p>

<pre><code>        services.AddSingleton&lt;IScheduledTask, CurrentApplicationSubscriptionsTask&gt;();

        services.AddScheduler((sender, args) =&gt;
        {
            Debug.Write(args.Exception.Message);
            args.SetObserved();
        });
</code></pre>

<p>It should get all subscriptions and make it available for any other part of my application to work with.</p>

<p>As you can see, the AddScheduler takes a delegate that handles unobserved exceptions. In our scheduler code, TaskFactory.StartNew() is used to run the taskâ€™s code. If there is an unhandled exception, you wonâ€™t see this exception.</p>

<p>Therefore you may want to so some logging. This is normally done by setting TaskScheduler.UnobservedTaskException, that is global for this case so added our own to specifically catch scheduled tasks unhandled exceptions.</p>

<p>The SDK allows you to subscribe to the event application subscriptions changed.</p>

<p>Start by getting the singleton instance of the hub:</p>

<pre><code>var hub = MessageHub.Instance;
</code></pre>

<p>You can now use the hub to subscribe to any publication of a given type, in our case OnChangedSubscription.</p>

<pre><code>public class HomeController : Controller

{

    private readonly MessageHub _hub;
    private readonly Guid _subscriptionToken;

    public HomeController(Platform platform,MessageHub hub)
    {
        _hub = hub;
        _subscriptionToken =   _hub.Subscribe&lt;List&lt;ChangedSubscription&gt;&gt;(OnChangedSubscription);
    }

    private void OnChangedSubscription(List&lt;ChangedSubscription&gt; obj)
    {

    }
</code></pre>

<p>}</p>

<h3 id="program-class">Program class</h3>

<p>In ASP.NET Core 2.0, the Program class is used to setup the IWebHost. This is the entry point to our application. The main method creates a host, builds and then runs it. The host then listens for HTTP requests.</p>

<p>There are multiple ways to configure the application.</p>

<h4 id="simplified-configuration">Simplified configuration</h4>

<p>By using the extension to IWebHost - <strong>UseMicroserviceApplication</strong> the configuration with Startup can be simplified.</p>

<p>UseMicroserviceApplication has an optional parameter by default &ldquo;true&rdquo;. This parameter indicates whether to create a healthpoint.</p>

<pre><code>public class Program
{
    public static void Main(string[] args)
    {
        BuildWebHost(args).Run();
    }

    public static IWebHost BuildWebHost(string[] args) =&gt;
        WebHost.CreateDefaultBuilder(args)
            .UseKestrel(options =&gt;
            {
                var port = Environment.GetEnvironmentVariable(&quot;SERVER_PORT&quot;);
                options.Listen(IPAddress.Parse(&quot;0.0.0.0&quot;), Int32.TryParse(port, out var portNumber) ? portNumber : 8080);
            })
            .ConfigureLogging((hostingContext, logging) =&gt;
            {
                logging.AddConfiguration(hostingContext.Configuration.GetSection(&quot;Logging&quot;));
                logging.AddConsole().SetMinimumLevel(LogLevel.Information);
            })
            .UseMicroserviceApplication()
            .UseStartup&lt;Startup&gt;()
            .Build();
}
</code></pre>

<p>The minimum form of the Startup class may look like the following code:</p>

<pre><code>public class Startup
{
    public Startup(IConfiguration configuration)
    {
        Configuration = configuration;
    }

    public IConfiguration Configuration { get; }

    public void ConfigureServices(IServiceCollection services)
    {
        services.AddMvc();
    }

    public void Configure(IApplicationBuilder app, IHostingEnvironment env)
    {
        app.UseMvcWithDefaultRoute();
    }
}
</code></pre>

<h4 id="advanced-configuration">Advanced configuration</h4>

<p>In this case, the entire configuration must be carried out manually:</p>

<pre><code>    public class Program
    {

    public static void Main(string[] args)
    {
        BuildWebHost(args).Run();
    }

    public static IWebHost BuildWebHost(string[] args) =&gt;

        WebHost.CreateDefaultBuilder(args)
        .UseKestrel()
        .ConfigureLogging((hostingContext, logging) =&gt;
        {
            logging.SetMinimumLevel(LogLevel.Warning);
            logging.AddConsole();
            logging.AddDebug();
        })
        .UseStartup&lt;Startup&gt;()
        .UseKestrel(options =&gt;
        {
            var env = Environment.GetEnvironmentVariable(&quot;ASPNETCORE_ENVIRONMENT&quot;);
            var port = Environment.GetEnvironmentVariable(&quot;SERVER_PORT&quot;);
            int portNumber = 8080;

            if (Int32.TryParse(port, out portNumber)){
                options.Listen(IPAddress.Parse(&quot;0.0.0.0&quot;), portNumber);
            }
            else{
                options.Listen(IPAddress.Parse(&quot;0.0.0.0&quot;), 1);
            }
        })
        .Build();
    }
</code></pre>

<p>The Startup class may look like the following code:</p>

<pre><code>public class Startup
{
    ILogger _logger;

    public Startup(IConfiguration configuration, ILoggerFactory loggerFactory)
    {
        Configuration = configuration;
        _logger = loggerFactory.CreateLogger&lt;Startup&gt;();
    }

    public IConfiguration Configuration { get; }

    public void ConfigureServices(IServiceCollection services)
    {
        _logger.LogDebug($&quot;Total Services Initially: {services.Count}&quot;);

        services.AddMemoryCache();
        services.AddPlatform(Configuration);
        ConfigureServicesLayer(services);
        services.AddSingleton&lt;IHttpContextAccessor, HttpContextAccessor&gt;();

        // Add scheduled tasks &amp; scheduler
        services.AddSingleton&lt;IScheduledTask, TimerTask&gt;();
        services.AddScheduler((sender, args) =&gt;
        {
            Debug.Write(args.Exception.Message);
            args.SetObserved();
        });

        //MVC
        services.AddMvc().AddJsonOptions(options =&gt; options.SerializerSettings.ContractResolver = new DefaultContractResolver());
        //services.Replace(ServiceDescriptor.Singleton(typeof(ILogger&lt;&gt;), typeof(TimedLogger&lt;&gt;)));
    }
    public virtual void ConfigureServicesLayer(IServiceCollection services)
    {
        services.AddCumulocityAuthentication(Configuration);
        services.AddSingleton&lt;IApplicationService, ApplicationService&gt;();
    }

    public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
    {
        app.UseAuthentication();
        app.UseBasicAuthentication();
        app.UseMvcWithDefaultRoute();
    }
}
</code></pre>

<h3 id="health-check">Health check</h3>

<p>Health monitoring can allow near-real-time information about the state of your containers and microservices. Health monitoring is critical to multiple aspects of operating microservices and is especially important when orchestrators perform partial application upgrades in phases.</p>

<p>For a service or web application to expose the health check endpoint, it has to enable the <strong>UseHealthChecks([url_for_health_checks])</strong> extension method. This method goes at the WebHostBuilder level in the main method of the Program class of your ASP.NET Core service or web application, right after UseKestrel as shown in the code below.</p>

<pre><code>public class Program
{
    public static void Main(string[] args)
    {
        BuildWebHost(args).Run();
    }

    public static IWebHost BuildWebHost(string[] args) =&gt;
        WebHost.CreateDefaultBuilder(args)
            .ConfigureLogging((hostingContext, logging) =&gt;{})
            .UseStartup&lt;Startup&gt;()
            .UseKestrel(options =&gt;{})
            .UseHealthChecks(&quot;/health&quot;)
            .Build();
}
</code></pre>

<p>The process works like this: each microservice exposes the endpoint e.g. /health. That endpoint is created by the library ASP.NET Core middleware. When that endpoint is invoked, it runs all the health checks that are configured in the AddHealthChecks method in the Startup class.</p>

<p>The UseHealthChecks method expects a port or a path. That port or path is the endpoint to use to check the health state of the service. For instance, the catalog microservice uses the path /health.</p>

<p>The basic flow is that you register your health checks in your IoC container. You register these health checks via a fluent HealthCheckBuilder API in your Startupâ€˜s ConfigureServices method.  This HealthCheckBuilder will build a HealthCheckService and register it as an IHealthCheckService in your IoC container.</p>

<h4 id="built-in-platform-health-checks">Built-in platform health checks</h4>

<p>The microservice is healthy if the platform is accessible via HTTP from the application. To check it, it is possible to use an action that is built-in.</p>

<pre><code>.AddPlatformCheck();
</code></pre>

<p>After that, you add the health check actions that you want to perform in that microservice. These actions are basically dependencies on other microservices (HttpUrlCheck) or databases (currently SqlCheck* for SQL Server databases). You add the action within the Startup class of each ASP.NET microservice or ASP.NET web application.</p>

<h4 id="custom-health-check">Custom health check</h4>

<p>It is also possible to make your own custom health check. However, to do that, derive from IHealthCheck and implement the interface.  Below is an example of one that checks to make sure the C drive has at least 1 GB of free space.</p>

<pre><code>public class CheckCDriveHasMoreThan1GbFreeHealthCheck : IHealthCheck
{
    public ValueTask&lt;IHealthCheckResult&gt; CheckAsync(CancellationToken cancellationToken = default(CancellationToken))
    {
        long freeSpaceInGb = GetTotalFreeSpaceInGb(@&quot;C:\&quot;);
        CheckStatus status = freeSpaceInGb &gt; 1 ? CheckStatus.Healthy : CheckStatus.Unhealthy;

        return new ValueTask&lt;IHealthCheckResult&gt;(HealthCheckResult.FromStatus(status, $&quot;Free Space [GB]: {freeSpaceinGb}&quot;));

    }

    private long GetTotalFreeSpaceInGb(string driveName)
    {
        foreach (DriveInfo drive in DriveInfo.GetDrives())
        {
            if (drive.IsReady &amp;&amp; drive.Name == driveName)
            {
                return drive.TotalFreeSpace / 1024 / 1024 / 1024;
            }
        }
        throw new ArgumentException($&quot;Invalid Drive Name {driveName}&quot;);
    }
}
</code></pre>

<p>Then in your ConfigureServices method, register the custom health check with adequate the lifetime of the service that makes sense for the health check and then add it to the AddHealthChecks registration that has been done before.</p>

<pre><code>public void ConfigureServices(IServiceCollection services)
{
    services.AddSingleton&lt;CDriveHasMoreThan1GbFreeHealthCheck&gt;();

    services.AddHealthChecks(checks =&gt;
    {
        checks.AddCheck&lt;CheckCDriveHasMoreThan1GbFreeHealthCheck&gt;(&quot;C Drive has more than 1 GB Free&quot;);
    });

    services.AddMvc();
}
</code></pre>

<p>The following example combines built-in checking and custom checking:</p>

<pre><code>    public class Startup
    {
        ILogger _logger;
        public Startup(IConfiguration configuration, ILoggerFactory loggerFactory)
        {
            Configuration = configuration;
            ...
        }

        public IConfiguration Configuration { get; }


        public void ConfigureServices(IServiceCollection services)
        {
            ...
            // Add framework services
            services.AddHealthChecks(checks =&gt;
            {
                checks.AddPlatformCheck();
                checks.AddCheck(&quot;long-running&quot;, async cancellationToken =&gt;
                {
                    await Task.Delay(1000, cancellationToken);
                    return HealthCheckResult.Healthy(&quot;I ran too long&quot;);
                });
            });

            ...
        }

        public void Configure(IApplicationBuilder app, IHostingEnvironment env, ILoggerFactory loggerFactory)
        {
            ...
            app.UseMvcWithDefaultRoute();
        }
    }
</code></pre>

<h3 id="cake">Cake</h3>

<p>Cake is a cross platform build automation system, built on top of Roslyn and the Mono Compiler, which uses C# as the scripting language to do things like compiling code, copy files/folders, running unit tests, compress files and build NuGet packages.</p>

<p>The cake script called build.cake has has the predefined tasks. Tasks represent a unit of work in Cake, and you use them to perform specific work in a specific order.</p>

<ul>
<li>Clean - Cleans the specified directory, deletes files.</li>
<li>Build â€“ Restores the dependencies and tools of projects and the task builds all projects, but before that it does the cleaning task.</li>
<li>Publish â€“ The task compiles the application, reads through its dependencies specified in the project file, and publishes the resulting set of files to a directory. The result will be placed in the output folder</li>
<li>Docker-Build - Will save an image and an application manifest  to images/multi/image.zip. Inside the root folder of your application, the so-called &ldquo;application manifest&rdquo; is stored in a file cumulocity.json. The zip archive contains image.tar and cumulocity.json.</li>
<li>Single-DockerImage - Will save an image and an application manifest  to images/single /image.zip. Inside the root folder of your application, the so-called &ldquo;application manifest&rdquo; is stored in a file cumulocity.json. The zip archive contains image.tar and cumulocity.json.</li>
<li>Docker-Run - Creates a new container using default settings.</li>
</ul>

  </article>
  
  
</div>
<footer class="main-footer">
  <div class="copyright">
    <div class="container text-center">
      <p class="small ">&copy; 2019 Cumulocity GmbH | All rights reserved.</p>
    </div>
  </div>  
</footer>

<!-- Essential Scripts -->

<!-- jQuery -->
<script src="https://cumulocity.com/guides/js/vendor/jquery.min.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/bootstrap.bundle.min.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/clipboard.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/zoom.js"></script>
<script src="https://cumulocity.com/guides/js/vendor/highlight.min.js"></script>
<script src="https://cumulocity.com/guides/js/main.js"></script>





    
   
  </body>
</html>
